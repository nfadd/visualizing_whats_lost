(this["webpackJsonpreact-capacitor-example"]=this["webpackJsonpreact-capacitor-example"]||[]).push([[1],{57:function(e,t,n){},58:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},65:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=65},66:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=66},67:function(e,t,n){},70:function(e,t,n){var i={"./pwa-action-sheet.entry.js":[77,13],"./pwa-camera-modal-instance.entry.js":[78,14],"./pwa-camera-modal.entry.js":[79,15],"./pwa-camera.entry.js":[80,16],"./pwa-toast.entry.js":[81,17]};function o(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(i)},o.id=70,e.exports=o},71:function(e,t,n){"use strict";n.r(t);var i=n(11),o=n.n(i),a=n(33),c=n.n(a),r=(n(57),n(58),n(49)),l=n(16),s=n(15),d=n(35),u=n(31),m=n.n(u),p=(n(61),n(50)),h=Object(p.a)({apiKey:"AIzaSyDKunTJeLq319SujC6queisk-g9AQUHYI8",authDomain:"vsl-app-443fc.firebaseapp.com",projectId:"vsl-app-443fc",storageBucket:"vsl-app-443fc.appspot.com",messagingSenderId:"899884991965"}),b=Object(d.a)(h),g=Object(d.c)(b),y=(n(62),n(24)),f=n(2),j=n.n(f),v=n(5),O=n(3),w=n(4),_=n(37),x=n(83),E=function(){function e(){Object(O.a)(this,e)}return Object(w.a)(e,[{key:"startCamera",value:function(){document.getElementById("cameraButton").style.display="none",document.getElementById("cameraPreview").style.display="block",document.getElementById("popup").style.height="0",document.getElementById("map").style.display="none";_.a.start({position:"rear",parent:"cameraPreview",class:"cameraPreview",toBack:!0})}},{key:"stopCamera",value:function(){var e=Object(v.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.stop();case 2:document.getElementById("map").style.display="block",document.getElementById("cameraPreview").style.display="none",document.getElementById("cameraButton").style.display="block",document.getElementById("popup").style.height="50%";case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"captureImage",value:function(){var e=Object(v.a)(j.a.mark((function e(t){var n,i,o,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={quality:90},e.next=3,_.a.capture(n);case 3:i=e.sent,o=document.getElementById("user_photo_row"),(a=document.createElement("img")).id="thumb_image",a.alt=Object(x.a)(),a.src="data:image/jpeg;base64,".concat(i.value),o.appendChild(a),C(t,a),N();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"flipCamera",value:function(){_.a.flip()}}]),e}();function C(e,t){var n=Object(y.b)(),i=Object(y.d)(n,"rowid".concat(e,"/").concat(t.alt));Object(y.e)(i,t.src,"data_url").then((function(e){console.log("Uploaded a data_url string!")}))}var k=new E,I=k.startCamera,N=k.stopCamera,B=k.captureImage,L=k.flipCamera,M=0,P=0,U=0,T=0;function A(){var e=[M,P],t=e[0],n=e[1],i=[U,T],o=i[0],a=i[1];console.log("pin lat: ".concat(t,", pin long: ").concat(n)),console.log("user lat: ".concat(o,", user long: ").concat(a)),function(e,t,n,i){var o=6371e3,a=S(n-e),c=S(i-t),r=Math.sin(a/2)*Math.sin(a/2)+Math.cos(S(e))*Math.cos(S(n))*Math.sin(c/2)*Math.sin(c/2),l=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),s=o*l;return console.log("distance: ".concat(s)),s}(o,a,t,n)>100?alert("You must be closer to location to take a picture."):I()}function S(e){return e*(Math.PI/180)}var D=n(13);function F(){return Object(D.jsx)("div",{className:"ion-content",children:Object(D.jsxs)("div",{id:"popup",className:"sidebar",children:[Object(D.jsx)("div",{id:"controls_row",className:"vertical_div",children:Object(D.jsx)("a",{href:"#",className:"closebtn",onClick:function(){document.getElementById("popup").style.height="0"},children:"\xd7"})}),Object(D.jsx)("div",{id:"location_info_row",className:"vertical_div"}),Object(D.jsx)("p",{className:"headertext",children:"Legacy Photos"}),Object(D.jsx)("div",{id:"legacy_photo_row",className:"vertical_div"}),Object(D.jsx)("p",{className:"headertext",children:"User Photos"}),Object(D.jsx)("div",{id:"user_photo_row",className:"vertical_div"}),Object(D.jsx)("button",{id:"cameraButton",className:"cameraButton",onClick:function(){A()},children:"Camera"})]})})}n(64);var q=n(28),H=n(41),J=0;function V(){return Object(D.jsxs)("div",{id:"cameraPreview",className:"cameraPreview",style:{display:"none"},children:[Object(D.jsx)("img",{id:"historicalImage",className:"image-overlay",alt:""}),Object(D.jsx)(q.a,{id:"close",className:"button",onClick:function(){N()},children:Object(D.jsx)(q.b,{icon:H.c,slot:"icon-only"})}),Object(D.jsx)(q.a,{id:"capture",className:"button",onClick:function(){B(J)},children:Object(D.jsx)(q.b,{icon:H.a,slot:"icon-only"})}),Object(D.jsx)(q.a,{id:"flip",className:"button",onClick:function(){L()},children:Object(D.jsx)(q.b,{icon:H.b,slot:"icon-only"})})]})}m.a.accessToken="pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA";var z=function(){var e=Object(i.useRef)(null);return Object(i.useEffect)((function(){var t=new m.a.Map({container:e.current,style:"mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf",center:[-90.215916,38.629888],zoom:12.5});t.on("load",(function(){t.addSource("mvc_border",{type:"vector",url:"mapbox://nickfaddis.cl2p9p65v003320tk7nljmzxl-0ljp3"}),t.addLayer({id:"border",type:"fill",source:"mvc_border","source-layer":"Mill_Creek_Valley_Outline",layout:{},paint:{"fill-color":"#0080ff","fill-opacity":.3}}),t.addLayer({id:"outline",type:"line",source:"mvc_border","source-layer":"Mill_Creek_Valley_Outline",layout:{},paint:{"line-color":"#000","line-width":3}}),t.setLayoutProperty("border","visibility","visible"),t.setLayoutProperty("outline","visibility","visible")})),t.addControl(new m.a.NavigationControl,"top-right");var n=new m.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0});t.addControl(n),n.on("geolocate",(function(e){var t=e.coords.latitude,n=e.coords.longitude;console.log("lat, lng",t,n),U=t,T=n})),t.on("idle",(function(){if(t.getLayer("border")&&t.getLayer("outline")){var e,n=new Map([["border","https://cdn-icons-png.flaticon.com/512/3199/3199097.png"],["outline","http://cdn.onlinewebfonts.com/svg/img_406792.png"]]),i=Object(s.a)(n);try{var o=function(){var n=Object(l.a)(e.value,2),i=n[0],o=n[1];if(document.getElementById(i))return"continue";var a=document.createElement("a");a.id=i,a.href="#",a.className="active";var c=document.createElement("img");c.src=o,a.appendChild(c),a.onclick=function(e){var n=i;e.preventDefault(),e.stopPropagation();var o=t.getLayoutProperty(n,"visibility");console.log(o),"visible"===o?(t.setLayoutProperty(n,"visibility","none"),this.className=""):(this.className="active",t.setLayoutProperty(n,"visibility","visible"))},document.getElementById("toggle").appendChild(a)};for(i.s();!(e=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}}})),Object(d.b)(g,(function(e){var n=e.val();Object.keys(n).map((function(e){return Object(r.a)({key:e},n[e])})).forEach((function(e){var n,i=new m.a.Marker,o=e.lng,a=e.lat;i.setLngLat([o,a]),i.addTo(t),i.getElement().addEventListener("click",(function(){var t;t=e.key,J=t,function(e){var t=document.getElementById("user_photo_row"),n=Object(y.b)(),i=Object(y.d)(n,"rowid".concat(e,"/"));Object(y.c)(i).then((function(e){e.items.forEach((function(e){Object(y.a)(e).then((function(e){var n=document.createElement("img");n.id="thumb_image",n.src=e,t.appendChild(n)}))}))}))}(e.key),function(e,t){M=e,P=t}(a,o);var n,i=document.getElementById("location_info_row"),c=document.getElementById("legacy_photo_row"),r=document.getElementById("user_photo_row");for(document.getElementById("popup").style.height="50%";i.childElementCount>0;)i.removeChild(i.lastChild);for(;c.childElementCount>0;)c.removeChild(c.lastChild);for(;r.childElementCount>0;)r.removeChild(r.lastChild);!function(e){var t=document.getElementById("location_info_row"),n=document.createElement("h1"),i=document.createTextNode(e.Name);if(n.id="location_name",n.appendChild(i),t.appendChild(n),"NA"!==e.date){var o=document.createElement("p"),a=document.createTextNode(e.date);o.id="location_date",o.appendChild(a),t.appendChild(o)}}(e),function(e){var t=document.getElementById("legacy_photo_row"),n=document.createElement("img");n.id="thumb_image",n.src=e,console.log(e),t.appendChild(n)}(e.image_url),n=e.image_url,document.getElementById("historicalImage").src=n})),n=e.image_url,document.addEventListener("click",(function(e){var t=e.target;if(("thumb_image"===t.id||"large_image"===t.id)&&"NA"!==n)if(document.getElementById("large_image")){var i=document.getElementById("large_image");"hidden"===i.style.visibility?(console.log("showing"),i.style.visibility="visible",i.src=t.src):(console.log("hiding"),i.style.visibility="hidden")}else{var o=document.createElement("img");o.id="large_image",o.src=t.src,document.getElementById("App").appendChild(o)}}),!1)}))}))}),[]),Object(D.jsx)("div",{className:"map-container",style:{height:"100vh"},ref:e})},R=(n(67),n(26)),W=(n(68),n(69),n.p+"static/media/pin_highlight.466bdb23.png"),Y=n.p+"static/media/camera_highlight.f4c7440a.png",Z=n.p+"static/media/location_highlight.159c493f.jpg";function G(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("button",{className:"close_button",id:"info_button",onClick:function(e){return function(){var e=document.getElementById("test_id");if(null!=e){console.log("Elem found"),e.style.visibility="visible";var t=document.getElementById("info_button");null!=t&&(console.log("Elem found"),t.style.visibility="hidden")}}()},children:"Map Info"}),Object(D.jsxs)(R.a,{className:"mySwiper",id:"test_id",style:{position:"absolute"},onReachEnd:function(e){return function(e){console.log("Hiding swiper!"),e.el.style.visibility="hidden",e.slideTo(0),console.log(e.el.id);var t=document.getElementById("info_button");null!=t&&(console.log("Elem found"),t.style.visibility="visible")}(e)},children:[Object(D.jsx)(R.b,{children:Object(D.jsxs)("p",{children:[Object(D.jsx)("em",{children:"Visualizing What Was Lost"})," highlights the urban-renewal that occurred in the primarily African American St. Louis neighborhood, Mill Creek Valley in the 1950s. In pursuit of economic development goals, leadership at the time decided to demolish buildings present in the neighborhood for new development, forcibly displacing over 20,000 residents. Currently, Saint Louis University and Harris-Stowe University occupy much of the area."]})}),Object(D.jsxs)(R.b,{children:[Object(D.jsx)("img",{id:"pin-highlight",src:W,alt:""}),Object(D.jsx)("p",{children:"Tap on a pin to pull up information about the location."})]}),Object(D.jsxs)(R.b,{children:[Object(D.jsx)("img",{id:"camera-highlight",src:Y,alt:""}),Object(D.jsx)("p",{children:"When you are within 100 meters of a pin, tap the Camera button to open the Camera and take a picture of the location. Compare and contrast what was there with what is there today."})]}),Object(D.jsxs)(R.b,{children:[Object(D.jsx)("img",{id:"location-highlight",src:Z,alt:""}),Object(D.jsx)("p",{children:"Use the location button to highlight your current location."})]}),Object(D.jsxs)(R.b,{children:[Object(D.jsx)("p",{children:"That's it! Swipe to close!"}),Object(D.jsx)("p",{className:"hint_text",children:"Remember you can always pull this up from the button in the top left of the screen!"})]}),Object(D.jsx)(R.b,{children:"Nothing to see here"})]})]})}var K=function(){return Object(D.jsxs)("div",{className:"App",id:"App",children:[Object(D.jsxs)("div",{id:"map",children:[Object(D.jsx)(G,{}),Object(D.jsx)(z,{}),Object(D.jsx)(F,{}),Object(D.jsx)("div",{id:"toggle"})]}),Object(D.jsx)(V,{})]})},Q=function(e){e&&e instanceof Function&&n.e(23).then(n.bind(null,92)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),o(e),a(e),c(e)}))},X=n(52);c.a.render(Object(D.jsx)(o.a.StrictMode,{children:Object(D.jsx)(K,{})}),document.getElementById("root")),Object(X.a)(window),Q()}},[[71,2,5]]]);
//# sourceMappingURL=main.7d3bfead.chunk.js.map