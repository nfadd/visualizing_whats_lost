(this["webpackJsonpreact-capacitor-example"]=this["webpackJsonpreact-capacitor-example"]||[]).push([[6],{84:function(e,t,r){"use strict";r.r(t),r.d(t,"CameraPreviewWeb",(function(){return d})),r.d(t,"CameraPreview",(function(){return f}));var a=r(2),n=r.n(a),c=r(5),i=r(3),o=r(4),u=r(7),s=r(8),p=r(47),d=function(e){Object(u.a)(r,e);var t=Object(s.a)(r);function r(){return Object(i.a)(this,r),t.call(this,{name:"CameraPreview",platforms:["web"]})}return Object(o.a)(r,[{key:"start",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(n.a.mark((function e(a,c){var i,o,u,s,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!t.disableAudio,video:!0}).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))})).catch((function(e){c(e)}));case 2:i=document.getElementById("video"),o=document.getElementById(t.parent),i?c({message:"camera already started"}):((u=document.createElement("video")).id="video",u.setAttribute("class",t.className||""),"rear"!==t.position&&u.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);"),s=navigator.userAgent.toLowerCase(),s.includes("safari")&&!s.includes("chrome")&&(u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true")),o.appendChild(u),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(p={video:!0},"rear"===t.position?(p.video={facingMode:"environment"},r.isBackCamera=!0):r.isBackCamera=!1,navigator.mediaDevices.getUserMedia(p).then((function(e){u.srcObject=e,u.play(),a({})}),(function(e){c(e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(c.a)(n.a.mark((function e(){var t,r,a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("video")){for(t.pause(),r=t.srcObject,a=r.getTracks(),c=0;c<a.length;c++)a[c].stop();t.remove()}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var a=document.getElementById("video"),n=document.createElement("canvas"),c=n.getContext("2d");n.width=a.videoWidth,n.height=a.videoHeight,r.isBackCamera||(c.translate(a.videoWidth,0),c.scale(-1,1)),c.drawImage(a,0,0,a.videoWidth,a.videoHeight),e({value:n.toDataURL("image/png").replace("data:image/png;base64,","")})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"captureSample",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.capture(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSupportedFlashModes",value:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getSupportedFlashModes not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setFlashMode",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setFlashMode not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"flip",value:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("flip not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setOpacity",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.getElementById("video"))&&t.opacity&&r.style.setProperty("opacity",t.opacity.toString());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(p.a),f=new d;Object(p.c)(f)}}]);
//# sourceMappingURL=6.47f351ec.chunk.js.map