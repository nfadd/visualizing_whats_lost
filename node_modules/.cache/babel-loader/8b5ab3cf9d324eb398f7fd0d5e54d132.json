{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{onValue}from\"firebase/database\";import mapboxgl from'mapbox-gl';import'mapbox-gl/dist/mapbox-gl.css';//Must have this otherwise pins don't anchor\nimport connect_to_firebase from'./query/connect_to_firebase.js';import{getHistoricalImage}from'./Sidebar';import{jsx as _jsx}from\"react/jsx-runtime\";mapboxgl.accessToken='pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA';var MapContainer=function MapContainer(){var mapContainer=useRef(null);useEffect(function(){var map=new mapboxgl.Map({container:mapContainer.current,style:'mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf',center:[-90.221932,38.632511],zoom:15});map.addControl(new mapboxgl.NavigationControl(),'top-right');map.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:true},trackUserLocation:true,showUserHeading:true}));onValue(connect_to_firebase,function(snapshot){var data=snapshot.val();data.forEach(function(element){var marker=new mapboxgl.Marker();var long=element.lng;var lat=element.lat;marker.setLngLat([long,lat]);marker.addTo(map);marker.getElement().addEventListener('click',function(){//Variables for sidebar divs\nvar location_info_div=document.getElementById('location_info_row');var legacy_photo_div=document.getElementById('legacy_photo_row');var user_photo_div=document.getElementById('user_photo_row');//Make popup visible by modifying height\ndocument.getElementById(\"popup\").style.height=\"50%\";//Clear each div of past elements\nwhile(location_info_div.childElementCount>0){location_info_div.removeChild(location_info_div.lastChild);}while(legacy_photo_div.childElementCount>0){legacy_photo_div.removeChild(legacy_photo_div.lastChild);}while(user_photo_div.childElementCount>0){user_photo_div.removeChild(user_photo_div.lastChild);}//Initialize the name and date elements\nvar name_par=document.createElement('h1');var name=document.createTextNode(element.Name);name_par.id='location_name';name_par.appendChild(name);location_info_div.appendChild(name_par);if(element.date!==\"NA\"){var date_par=document.createElement('p');var date=document.createTextNode(element.date);date_par.id='location_date';date_par.appendChild(date);location_info_div.appendChild(date_par);}var image=document.createElement('img');image.id=\"thumb_image\";image.src=element.image_url;legacy_photo_div.appendChild(image);getHistoricalImage(element.image_url);var image2_electricboogaloo=document.createElement('img');image2_electricboogaloo.id=\"thumb_image\";image2_electricboogaloo.src=element.image_url;legacy_photo_div.appendChild(image2_electricboogaloo);var user_image=document.createElement('img');user_image.id=\"thumb_image\";user_image.src=\"https://www.slu.edu/news/img/2019-news-newslink/january-pics/chaifetz-arial-min.jpg\";user_photo_div.appendChild(user_image);/*document.addEventListener('click', function(e){\n                        var target = e.target\n                        if (target.id == \"thumb_img\" && target.classList.contains('canfullscreen')){\n                            if (document.fullscreenElement){ // if browser is currently not in full screen\n                                target.requestFullscreen();\n                            }\n                            else{\n                                target.exitFullscreen();\n                            }\n                        }\n                    }, false) */ //Add pictures to bottom div\n//Create container for each image of size x by y\n//When clicking an image, view fullscreen version of image\n/*var node = document.createElement('a');\n                    var name = document.createTextNode(element.Name);\n                    node.appendChild(name);\n                    document.getElementById(\"popup\").appendChild(node);\n                    \n                    var image = document.createElement('img');\n                    image.src = element.image_url;\n                    document.getElementById(\"popup\").appendChild(image);*/});});});//TODO: Create radio button to change between labeled and non-labeled styles\n//map.setStyle('mapbox://styles/mapbox/outdoors-v11');\n},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",style:{height:'100vh'},ref:mapContainer});};export default MapContainer;","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/MapContainer.js"],"names":["React","useRef","useEffect","onValue","mapboxgl","connect_to_firebase","getHistoricalImage","accessToken","MapContainer","mapContainer","map","Map","container","current","style","center","zoom","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","showUserHeading","snapshot","data","val","forEach","element","marker","Marker","long","lng","lat","setLngLat","addTo","getElement","addEventListener","location_info_div","document","getElementById","legacy_photo_div","user_photo_div","height","childElementCount","removeChild","lastChild","name_par","createElement","name","createTextNode","Name","id","appendChild","date","date_par","image","src","image_url","image2_electricboogaloo","user_image"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { onValue } from \"firebase/database\";\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css' //Must have this otherwise pins don't anchor\nimport connect_to_firebase from './query/connect_to_firebase.js';\nimport { getHistoricalImage } from './Sidebar';\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA';\n\nconst MapContainer = () => {\n    const mapContainer = useRef(null);\n   \n    useEffect(() => {\n        const map = new mapboxgl.Map({\n            container: mapContainer.current,\n            style: 'mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf',\n            center: [-90.221932, 38.632511],\n            zoom: 15\n        });\n\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n\n        map.addControl(new mapboxgl.GeolocateControl(\n            {\n                positionOptions: {\n                    enableHighAccuracy: true\n                },\n                trackUserLocation: true,\n                showUserHeading: true\n            })\n        );\n\n        onValue(connect_to_firebase, (snapshot) => {\n            const data = snapshot.val();\n            data.forEach(element => {\n                const marker = new mapboxgl.Marker();\n                var long = element.lng;\n                var lat = element.lat;\n                marker.setLngLat([long,lat]);\n                marker.addTo(map);\n\n                marker.getElement().addEventListener('click', () => {\n                    //Variables for sidebar divs\n                    var location_info_div = document.getElementById('location_info_row');\n                    var legacy_photo_div = document.getElementById('legacy_photo_row');\n                    var user_photo_div = document.getElementById('user_photo_row');\n\n                    //Make popup visible by modifying height\n                    document.getElementById(\"popup\").style.height = \"50%\";\n\n                    //Clear each div of past elements\n                    while(location_info_div.childElementCount > 0) {\n                        location_info_div.removeChild(location_info_div.lastChild);\n                    }\n                    while(legacy_photo_div.childElementCount > 0) {\n                        legacy_photo_div.removeChild(legacy_photo_div.lastChild);\n                    }\n                    while(user_photo_div.childElementCount > 0) {\n                        user_photo_div.removeChild(user_photo_div.lastChild);\n                    }\n\n                    //Initialize the name and date elements\n                    var name_par = document.createElement('h1');\n                    var name = document.createTextNode(element.Name);\n                    name_par.id = 'location_name'\n                    name_par.appendChild(name);\n                    location_info_div.appendChild(name_par);\n                    if (element.date !== \"NA\") {\n                        var date_par = document.createElement('p');\n                        var date = document.createTextNode(element.date);\n                        date_par.id = 'location_date'\n                        date_par.appendChild(date);\n                        location_info_div.appendChild(date_par);\n                    }\n\n                    var image = document.createElement('img');\n                    image.id = \"thumb_image\";\n                    image.src = element.image_url;\n                    legacy_photo_div.appendChild(image);\n                    getHistoricalImage(element.image_url);\n\n                    var image2_electricboogaloo = document.createElement('img');\n                    image2_electricboogaloo.id = \"thumb_image\";\n                    image2_electricboogaloo.src = element.image_url;\n                    legacy_photo_div.appendChild(image2_electricboogaloo);\n\n                    var user_image = document.createElement('img');\n                    user_image.id = \"thumb_image\";\n                    user_image.src = \"https://www.slu.edu/news/img/2019-news-newslink/january-pics/chaifetz-arial-min.jpg\"\n                    user_photo_div.appendChild(user_image);\n\n\n                    \n                    /*document.addEventListener('click', function(e){\n                        var target = e.target\n                        if (target.id == \"thumb_img\" && target.classList.contains('canfullscreen')){\n                            if (document.fullscreenElement){ // if browser is currently not in full screen\n                                target.requestFullscreen();\n                            }\n                            else{\n                                target.exitFullscreen();\n                            }\n                        }\n                    }, false) */\n                    \n                    //Add pictures to bottom div\n\n                    //Create container for each image of size x by y\n                    //When clicking an image, view fullscreen version of image\n                    \n\n                    /*var node = document.createElement('a');\n                    var name = document.createTextNode(element.Name);\n                    node.appendChild(name);\n                    document.getElementById(\"popup\").appendChild(node);\n                    \n                    var image = document.createElement('img');\n                    image.src = element.image_url;\n                    document.getElementById(\"popup\").appendChild(image);*/\n                    \n                })\n            })\n        });\n\n        //TODO: Create radio button to change between labeled and non-labeled styles\n        //map.setStyle('mapbox://styles/mapbox/outdoors-v11');\n    }, []);\n\n    return <div className=\"map-container\" style={{height: '100vh'}} ref={ mapContainer } />;\n}\n\nexport default MapContainer;\n"]},"metadata":{},"sourceType":"module"}