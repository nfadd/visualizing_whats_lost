{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function Camera(){var screenshot=document.getElementById('screenshotButton');var cameraOptions=document.getElementById('select');var video=document.getElementById('video');var canvas=document.getElementById('canvas');var screenshotImage=document.getElementById('display-style');var screen=document.getElementById('display-cover');var screenshotControls=document.getElementById('screenshotControls');var _screenshotControls$q=screenshotControls.querySelectorAll('button'),_screenshotControls$q2=_slicedToArray(_screenshotControls$q,2),retake=_screenshotControls$q2[0],use=_screenshotControls$q2[1];var constraints={video:{width:{min:1280,ideal:1920,max:2560},height:{min:720,ideal:1080,max:1440}}};cameraOptions.onchange=function(){var updatedConstraints=_objectSpread(_objectSpread({},constraints),{},{deviceId:{exact:cameraOptions.value}});startStream(updatedConstraints,video);};if('mediaDevices'in navigator&&navigator.mediaDevices.getUserMedia){var updatedConstraints=_objectSpread(_objectSpread({},constraints),{},{deviceId:{exact:cameraOptions.value}});startStream(updatedConstraints,video);}var doScreenshot=function doScreenshot(){screenshot.style.display=\"none\";screenshotControls.style.display=\"block\";retake.onclick=retakePhoto;use.onclick=usePhoto;canvas.width=video.videoWidth;canvas.height=video.videoHeight;canvas.getContext('2d').drawImage(video,0,0);var image=document.createElement('img');image.id=\"screenshotImage\";image.className=\"screenshotImage\";image.src=canvas.toDataURL('image/jpeg');screenshotImage.appendChild(image);};screenshot.onclick=doScreenshot;var retakePhoto=function retakePhoto(){screenshotImage.removeChild(screenshotImage.lastChild);screenshotControls.style.display=\"none\";screenshot.style.display=\"block\";};var usePhoto=function usePhoto(){screen.style.display=\"none\";if(document.exitFullscreen){document.exitFullscreen();}else if(document.mozExitFullScreen){// Firefox\ndocument.mozExitFullScreen();}else if(document.webkitExitFullscreen){// Chrome, Safari, and Opera\ndocument.webkitExitFullscreen();}else if(document.msExitFullscreen){// IE/Edge\ndocument.msExitFullscreen();}};var getCameraSelection=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var devices,videoDevices,options;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return navigator.mediaDevices.enumerateDevices();case 2:devices=_context.sent;videoDevices=devices.filter(function(device){return device.kind==='videoinput';});options=videoDevices.map(function(videoDevice){return\"<option value=\\\"\".concat(videoDevice.deviceId,\"\\\">\").concat(videoDevice.label,\"</option>\");});cameraOptions.innerHTML=options.join('');case 6:case\"end\":return _context.stop();}}},_callee);}));return function getCameraSelection(){return _ref.apply(this,arguments);};}();getCameraSelection();}function startStream(_x,_x2){return _startStream.apply(this,arguments);}function _startStream(){_startStream=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(constraints,video){var stream;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return navigator.mediaDevices.getUserMedia(constraints);case 2:stream=_context2.sent;handleStream(stream,video);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _startStream.apply(this,arguments);}function handleStream(stream,video){video.srcObject=stream;}export default Camera;","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/Camera.js"],"names":["Camera","screenshot","document","getElementById","cameraOptions","video","canvas","screenshotImage","screen","screenshotControls","querySelectorAll","retake","use","constraints","width","min","ideal","max","height","onchange","updatedConstraints","deviceId","exact","value","startStream","navigator","mediaDevices","getUserMedia","doScreenshot","style","display","onclick","retakePhoto","usePhoto","videoWidth","videoHeight","getContext","drawImage","image","createElement","id","className","src","toDataURL","appendChild","removeChild","lastChild","exitFullscreen","mozExitFullScreen","webkitExitFullscreen","msExitFullscreen","getCameraSelection","enumerateDevices","devices","videoDevices","filter","device","kind","options","map","videoDevice","label","innerHTML","join","stream","handleStream","srcObject"],"mappings":"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","sourcesContent":["function Camera(){\n    const screenshot = document.getElementById('screenshotButton');\n    const cameraOptions = document.getElementById('select');\n    const video = document.getElementById('video');\n    const canvas = document.getElementById('canvas');\n    const screenshotImage = document.getElementById('display-style');\n    const screen = document.getElementById('display-cover');\n    const screenshotControls = document.getElementById('screenshotControls');\n    const [retake, use] = screenshotControls.querySelectorAll('button');\n\n    const constraints = {\n        video: {\n            width: {\n            min: 1280,\n            ideal: 1920,\n            max: 2560,\n            },\n            height: {\n            min: 720,\n            ideal: 1080,\n            max: 1440\n            },\n        }\n    };\n\n    cameraOptions.onchange = () => {\n        const updatedConstraints = {\n            ...constraints,\n            deviceId: {\n            exact: cameraOptions.value\n            }\n        };\n\n        startStream(updatedConstraints, video);\n    };\n\n    if ('mediaDevices' in navigator && navigator.mediaDevices.getUserMedia) {\n        const updatedConstraints = {\n        ...constraints,\n        deviceId: {\n            exact: cameraOptions.value\n        }\n        };\n        startStream(updatedConstraints, video);\n    }\n\n    const doScreenshot = () => {\n        screenshot.style.display = \"none\";\n        screenshotControls.style.display = \"block\";\n\n        retake.onclick = retakePhoto;\n        use.onclick = usePhoto;\n\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        canvas.getContext('2d').drawImage(video, 0, 0);\n\n        var image = document.createElement('img');\n        image.id = \"screenshotImage\";\n        image.className = \"screenshotImage\";\n        image.src = canvas.toDataURL('image/jpeg');\n        screenshotImage.appendChild(image);\n    };\n\n    screenshot.onclick = doScreenshot;\n\n    const retakePhoto = () => {\n        screenshotImage.removeChild(screenshotImage.lastChild);\n        screenshotControls.style.display = \"none\";\n        screenshot.style.display = \"block\";\n    };\n\n    const usePhoto = () => {\n        screen.style.display = \"none\";\n\n        if (document.exitFullscreen) {\n            document.exitFullscreen();\n        } else if (document.mozExitFullScreen) { // Firefox\n            document.mozExitFullScreen();\n        } else if (document.webkitExitFullscreen) { // Chrome, Safari, and Opera\n            document.webkitExitFullscreen();\n        } else if (document.msExitFullscreen) { // IE/Edge\n            document.msExitFullscreen();\n        }\n    };\n\n    const getCameraSelection = async () => {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const videoDevices = devices.filter(device => device.kind === 'videoinput');\n        const options = videoDevices.map(videoDevice => {\n            return `<option value=\"${videoDevice.deviceId}\">${videoDevice.label}</option>`;\n        });\n        cameraOptions.innerHTML = options.join('');\n    };\n\n    getCameraSelection();\n}\n\nasync function startStream(constraints, video) {\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    handleStream(stream, video);\n}\n\nfunction handleStream(stream, video) {\n    video.srcObject = stream;\n}\n\nexport default Camera;"]},"metadata":{},"sourceType":"module"}