{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/createClass\";import{getStorage,ref,uploadString}from\"firebase/storage\";import{CameraPreview}from'@capacitor-community/camera-preview';import{v4 as uuidv4}from'uuid';var Camera=/*#__PURE__*/function(){function Camera(){_classCallCheck(this,Camera);}_createClass(Camera,[{key:\"startCamera\",value:function startCamera(){var cameraButton=document.getElementById(\"cameraButton\");cameraButton.style.display=\"none\";var cameraPreview=document.getElementById(\"cameraPreview\");cameraPreview.style.display=\"block\";var popup=document.getElementById(\"popup\");popup.style.height=\"0\";var map=document.getElementById(\"map\");map.style.display=\"none\";var cameraPreviewOptions={position:'rear',parent:'cameraPreview',class:'cameraPreview',toBack:true};CameraPreview.start(cameraPreviewOptions);}},{key:\"stopCamera\",value:function(){var _stopCamera=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var map,cameraPreview,cameraButton,popup;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return CameraPreview.stop();case 2:map=document.getElementById(\"map\");map.style.display=\"block\";cameraPreview=document.getElementById(\"cameraPreview\");cameraPreview.style.display=\"none\";cameraButton=document.getElementById(\"cameraButton\");cameraButton.style.display=\"block\";popup=document.getElementById(\"popup\");popup.style.height=\"50%\";case 10:case\"end\":return _context.stop();}}},_callee);}));function stopCamera(){return _stopCamera.apply(this,arguments);}return stopCamera;}()},{key:\"captureImage\",value:function(){var _captureImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(index){var cameraPreviewOptions,result,user_photo_div,capturedImage;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cameraPreviewOptions={quality:90};_context2.next=3;return CameraPreview.capture(cameraPreviewOptions);case 3:result=_context2.sent;user_photo_div=document.getElementById(\"user_photo_row\");capturedImage=document.createElement('img');capturedImage.id=\"thumb_image\";capturedImage.alt=uuidv4();capturedImage.src=\"data:image/jpeg;base64,\".concat(result.value);user_photo_div.appendChild(capturedImage);uploadCapturedImage(index,capturedImage);stopCamera();case 12:case\"end\":return _context2.stop();}}},_callee2);}));function captureImage(_x){return _captureImage.apply(this,arguments);}return captureImage;}()},{key:\"flipCamera\",value:function flipCamera(){CameraPreview.flip();}}]);return Camera;}();function uploadCapturedImage(index,img){var storage=getStorage();var storageRef=ref(storage,\"rowid\".concat(index,\"/\").concat(img.alt));uploadString(storageRef,img.src,'data_url').then(function(snapshot){console.log('Uploaded a data_url string!');});}/*\nfunction retrieveCapturedImage(index) {\n    var storageRef = firebase.storage().ref();\n    storageRef.child(`rowid${index}`).getDownloadURL().then(function(url) {\n        document.querySelector('img').src = url;\n    });\n}\n*/var _Camera=new Camera(),startCamera=_Camera.startCamera,stopCamera=_Camera.stopCamera,captureImage=_Camera.captureImage,flipCamera=_Camera.flipCamera;export{startCamera,stopCamera,captureImage,flipCamera};","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/Camera.js"],"names":["getStorage","ref","uploadString","CameraPreview","v4","uuidv4","Camera","cameraButton","document","getElementById","style","display","cameraPreview","popup","height","map","cameraPreviewOptions","position","parent","class","toBack","start","stop","index","quality","capture","result","user_photo_div","capturedImage","createElement","id","alt","src","value","appendChild","uploadCapturedImage","stopCamera","flip","img","storage","storageRef","then","snapshot","console","log","startCamera","captureImage","flipCamera"],"mappings":"mqBAAA,OAASA,UAAT,CAAqBC,GAArB,CAA0BC,YAA1B,KAA8C,kBAA9C,CACA,OAASC,aAAT,KAA8B,qCAA9B,CACA,OAASC,EAAE,GAAIC,CAAAA,MAAf,KAA6B,MAA7B,C,GAEMC,CAAAA,M,uHAEF,sBAAc,CACV,GAAMC,CAAAA,YAAY,CAAGC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAArB,CACAF,YAAY,CAACG,KAAb,CAAmBC,OAAnB,CAA6B,MAA7B,CAEA,GAAMC,CAAAA,aAAa,CAAGJ,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAtB,CACAG,aAAa,CAACF,KAAd,CAAoBC,OAApB,CAA8B,OAA9B,CAEA,GAAME,CAAAA,KAAK,CAAGL,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAd,CACAI,KAAK,CAACH,KAAN,CAAYI,MAAZ,CAAqB,GAArB,CAEA,GAAMC,CAAAA,GAAG,CAAGP,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAZ,CACAM,GAAG,CAACL,KAAJ,CAAUC,OAAV,CAAoB,MAApB,CAGA,GAAMK,CAAAA,oBAAoB,CAAG,CACzBC,QAAQ,CAAE,MADe,CAEzBC,MAAM,CAAE,eAFiB,CAGzBC,KAAK,CAAE,eAHkB,CAIzBC,MAAM,CAAE,IAJiB,CAA7B,CAMAjB,aAAa,CAACkB,KAAd,CAAoBL,oBAApB,EACH,C,6GAED,kMACUb,CAAAA,aAAa,CAACmB,IAAd,EADV,QAGUP,GAHV,CAGgBP,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAHhB,CAIIM,GAAG,CAACL,KAAJ,CAAUC,OAAV,CAAoB,OAApB,CAEMC,aANV,CAM0BJ,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAN1B,CAOIG,aAAa,CAACF,KAAd,CAAoBC,OAApB,CAA8B,MAA9B,CAEMJ,YATV,CASyBC,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CATzB,CAUIF,YAAY,CAACG,KAAb,CAAmBC,OAAnB,CAA6B,OAA7B,CAEME,KAZV,CAYkBL,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAZlB,CAaII,KAAK,CAACH,KAAN,CAAYI,MAAZ,CAAqB,KAArB,CAbJ,uD,yMAgBA,kBAAmBS,KAAnB,mLACUP,oBADV,CACiC,CACzBQ,OAAO,CAAE,EADgB,CADjC,wBAKyBrB,CAAAA,aAAa,CAACsB,OAAd,CAAsBT,oBAAtB,CALzB,QAKUU,MALV,gBAOUC,cAPV,CAO2BnB,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAP3B,CAQQmB,aARR,CAQwBpB,QAAQ,CAACqB,aAAT,CAAuB,KAAvB,CARxB,CASID,aAAa,CAACE,EAAd,CAAmB,aAAnB,CACAF,aAAa,CAACG,GAAd,CAAoB1B,MAAM,EAA1B,CACAuB,aAAa,CAACI,GAAd,kCAA8CN,MAAM,CAACO,KAArD,EACAN,cAAc,CAACO,WAAf,CAA2BN,aAA3B,EAEAO,mBAAmB,CAACZ,KAAD,CAAQK,aAAR,CAAnB,CAEAQ,UAAU,GAhBd,yD,0HAmBA,qBAAa,CACTjC,aAAa,CAACkC,IAAd,GACH,C,sBAGL,QAASF,CAAAA,mBAAT,CAA6BZ,KAA7B,CAAoCe,GAApC,CAAyC,CACrC,GAAMC,CAAAA,OAAO,CAAGvC,UAAU,EAA1B,CACA,GAAMwC,CAAAA,UAAU,CAAGvC,GAAG,CAACsC,OAAD,gBAAkBhB,KAAlB,aAA2Be,GAAG,CAACP,GAA/B,EAAtB,CAEA7B,YAAY,CAACsC,UAAD,CAAaF,GAAG,CAACN,GAAjB,CAAsB,UAAtB,CAAZ,CAA8CS,IAA9C,CAAmD,SAACC,QAAD,CAAc,CAC7DC,OAAO,CAACC,GAAR,CAAY,6BAAZ,EACH,CAFD,EAGH,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEO,YAA8D,GAAItC,CAAAA,MAAJ,EAA9D,CAAQuC,WAAR,SAAQA,WAAR,CAAqBT,UAArB,SAAqBA,UAArB,CAAiCU,YAAjC,SAAiCA,YAAjC,CAA+CC,UAA/C,SAA+CA,UAA/C,C","sourcesContent":["import { getStorage, ref, uploadString } from \"firebase/storage\";\nimport { CameraPreview } from '@capacitor-community/camera-preview';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass Camera {\n\n    startCamera() {\n        const cameraButton = document.getElementById(\"cameraButton\");\n        cameraButton.style.display = \"none\";\n\n        const cameraPreview = document.getElementById(\"cameraPreview\");\n        cameraPreview.style.display = \"block\";\n\n        const popup = document.getElementById(\"popup\")\n        popup.style.height = \"0\";\n\n        const map = document.getElementById(\"map\");\n        map.style.display = \"none\";\n\n\n        const cameraPreviewOptions = {\n            position: 'rear',\n            parent: 'cameraPreview',\n            class: 'cameraPreview',\n            toBack: true,\n        };\n        CameraPreview.start(cameraPreviewOptions);\n    }\n    \n    async stopCamera() {\n        await CameraPreview.stop();\n\n        const map = document.getElementById(\"map\");\n        map.style.display = \"block\";\n\n        const cameraPreview = document.getElementById(\"cameraPreview\");\n        cameraPreview.style.display = \"none\";\n\n        const cameraButton = document.getElementById(\"cameraButton\");\n        cameraButton.style.display = \"block\";\n\n        const popup = document.getElementById(\"popup\")\n        popup.style.height = \"50%\";\n    }\n    \n    async captureImage(index) {\n        const cameraPreviewOptions = {\n            quality: 90,\n        };\n    \n        const result = await CameraPreview.capture(cameraPreviewOptions);\n\n        const user_photo_div = document.getElementById(\"user_photo_row\");\n        var capturedImage = document.createElement('img');\n        capturedImage.id = \"thumb_image\";\n        capturedImage.alt = uuidv4();\n        capturedImage.src = `data:image/jpeg;base64,${result.value}`;\n        user_photo_div.appendChild(capturedImage);\n\n        uploadCapturedImage(index, capturedImage);\n\n        stopCamera();\n    }\n    \n    flipCamera() {\n        CameraPreview.flip();\n    }\n}\n\nfunction uploadCapturedImage(index, img) {\n    const storage = getStorage();\n    const storageRef = ref(storage, `rowid${index}/${img.alt}`);\n\n    uploadString(storageRef, img.src, 'data_url').then((snapshot) => {\n        console.log('Uploaded a data_url string!');\n    });\n}\n\n/*\nfunction retrieveCapturedImage(index) {\n    var storageRef = firebase.storage().ref();\n    storageRef.child(`rowid${index}`).getDownloadURL().then(function(url) {\n        document.querySelector('img').src = url;\n    });\n}\n*/\n\nexport const { startCamera, stopCamera, captureImage, flipCamera } = new Camera();"]},"metadata":{},"sourceType":"module"}