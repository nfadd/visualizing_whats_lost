{"ast":null,"code":"/*\nfunction Camera() {\n    return(\n        <div className='camera'>\n            <label>\n                <input  id=\"camera\"\n                        style={{display: 'none'}}\n                        type=\"file\" \n                        accept=\"image/*\"\n                        capture=\"camera\"\n                        onChange={readURL(this)}\n                />\n                Camera\n            </label>\n        </div>\n    );\n}\n\nfunction saveImage() {\n    const input = document.getElementById('camera');\n\n    if (input != null){\n        input.onchange = (function(e) {\n            const file = e.path[0].files[0];\n            var image = document.createElement('img');\n            const reader = new FileReader();\n\n            reader.onload = function(event) {\n                image.src = event.target.result;\n            };\n\n            reader.readAsDataURL(file);\n            document.getElementById(\"popup\").appendChild(image);\n        });\n    }\n}\n\nfunction readURL(input){\n    var image = document.createElement('img');\n\n    //console.log(input);\n    \n    if (input !== undefined) {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n            image.src = e.target.result;\n        }\n       \n        reader.readAsDataURL(input.files[0]);\n        document.getElementById(\"popup\").appendChild(image);\n    }\n}\n\n*/\nimport { FreeCameraOptions } from \"mapbox-gl\";\n/*\nfunction CameraContainer() {\n    return (\n        <div>\n            <button id=\"camera\">Camera</button>\n            <video autoplay></video>\n            <script src=\"https://webrtc.github.io/adapter/adapter-latest.js\"></script>\n        </div>\n    )\n}\n\nfunction CameraOnClick() {\n    document.querySelector('#camera').addEventListener('click', async function init(e) {\n        try {\n          const stream = await navigator.mediaDevices.getUserMedia({\n            audio: false,\n            video: true\n          })\n          const videoTracks = stream.getVideoTracks()\n          const track = videoTracks[0]\n          alert(`Getting video from: ${track.label}`)\n          document.querySelector('video').srcObject = stream\n          document.querySelector('#camera').setAttribute('hidden', true)\n        } catch (error) {\n          alert(`${error.name}`)\n          console.error(error)\n        }\n    })\n}\n\nvar takePhotoButton = document.querySelector('button#takePhoto');\nvar canvas = document.querySelector('canvas');\n\ntakePhotoButton.onclick = takePhoto;\n\n// Get a Blob from the currently selected camera source and\n// display this with an img element.\nfunction takePhoto() {\n  imageCapture.takePhoto().then(function(blob) {\n    console.log('Took photo:', blob);\n    img.classList.remove('hidden');\n    img.src = URL.createObjectURL(blob);\n  }).catch(function(error) {\n    console.log('takePhoto() error: ', error);\n  });\n}\n\nexport default Camera\n*/\n\nfunction Camera() {\n  // The width and height of the captured photo. We will set the\n  // width to the value defined here, but the height will be\n  // calculated based on the aspect ratio of the input stream.\n  var width = 320; // We will scale the photo width to this\n\n  var height = 0; // This will be computed based on the input stream\n  // |streaming| indicates whether or not we're currently streaming\n  // video from the camera. Obviously, we start at false.\n\n  var streaming = false; // The various HTML elements we need to configure or control. These\n  // will be set by the startup() function.\n\n  var video = null;\n  var canvas = null;\n  var photo = null;\n  var startbutton = null;\n\n  function startup() {\n    if (showViewLiveResultButton()) {\n      return;\n    }\n\n    video = document.getElementById('video');\n    canvas = document.getElementById('canvas');\n    photo = document.getElementById('photo');\n    startbutton = document.getElementById('startbutton');\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: false\n    }).then(function (stream) {\n      video.srcObject = stream;\n      video.play();\n    }).catch(function (err) {\n      console.log(\"An error occurred: \" + err);\n    });\n    video.addEventListener('canplay', function (ev) {\n      if (!streaming) {\n        height = video.videoHeight / (video.videoWidth / width); // Firefox currently has a bug where the height can't be read from\n        // the video, so we will make assumptions if this happens.\n\n        if (isNaN(height)) {\n          height = width / (4 / 3);\n        }\n\n        video.setAttribute('width', width);\n        video.setAttribute('height', height);\n        canvas.setAttribute('width', width);\n        canvas.setAttribute('height', height);\n        streaming = true;\n      }\n    }, false);\n    startbutton.addEventListener('click', function (ev) {\n      takepicture();\n      ev.preventDefault();\n    }, false);\n    clearphoto();\n  } // Fill the photo with an indication that none has been\n  // captured.\n\n\n  function clearphoto() {\n    var context = canvas.getContext('2d');\n    context.fillStyle = \"#AAA\";\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    var data = canvas.toDataURL('image/png');\n    photo.setAttribute('src', data);\n  } // Capture a photo by fetching the current contents of the video\n  // and drawing it into a canvas, then converting that to a PNG\n  // format data URL. By drawing it on an offscreen canvas and then\n  // drawing that to the screen, we can change its size and/or apply\n  // other changes before drawing it.\n\n\n  function takepicture() {\n    var context = canvas.getContext('2d');\n\n    if (width && height) {\n      canvas.width = width;\n      canvas.height = height;\n      context.drawImage(video, 0, 0, width, height);\n      var data = canvas.toDataURL('image/png');\n      photo.setAttribute('src', data);\n    } else {\n      clearphoto();\n    }\n  } // Set up our event listener to run the startup process\n  // once loading is complete.\n\n\n  window.addEventListener('load', startup, false);\n}\n\n_c = Camera;\n;\nexport default Camera;\n\nvar _c;\n\n$RefreshReg$(_c, \"Camera\");","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/Camera.js"],"names":["FreeCameraOptions","Camera","width","height","streaming","video","canvas","photo","startbutton","startup","showViewLiveResultButton","document","getElementById","navigator","mediaDevices","getUserMedia","audio","then","stream","srcObject","play","catch","err","console","log","addEventListener","ev","videoHeight","videoWidth","isNaN","setAttribute","takepicture","preventDefault","clearphoto","context","getContext","fillStyle","fillRect","data","toDataURL","drawImage","window"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,iBAAT,QAAkC,WAAlC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASC,MAAT,GAAmB;AACf;AACA;AACA;AAEA,MAAIC,KAAK,GAAG,GAAZ,CALe,CAKK;;AACpB,MAAIC,MAAM,GAAG,CAAb,CANe,CAMK;AAEpB;AACA;;AAEA,MAAIC,SAAS,GAAG,KAAhB,CAXe,CAaf;AACA;;AAEA,MAAIC,KAAK,GAAG,IAAZ;AACA,MAAIC,MAAM,GAAG,IAAb;AACA,MAAIC,KAAK,GAAG,IAAZ;AACA,MAAIC,WAAW,GAAG,IAAlB;;AAEA,WAASC,OAAT,GAAmB;AACjB,QAAIC,wBAAwB,EAA5B,EAAgC;AAAE;AAAS;;AAC3CL,IAAAA,KAAK,GAAGM,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAR;AACAN,IAAAA,MAAM,GAAGK,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAT;AACAL,IAAAA,KAAK,GAAGI,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAR;AACAJ,IAAAA,WAAW,GAAGG,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAd;AAEAC,IAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAACV,MAAAA,KAAK,EAAE,IAAR;AAAcW,MAAAA,KAAK,EAAE;AAArB,KAApC,EACCC,IADD,CACM,UAASC,MAAT,EAAiB;AACrBb,MAAAA,KAAK,CAACc,SAAN,GAAkBD,MAAlB;AACAb,MAAAA,KAAK,CAACe,IAAN;AACD,KAJD,EAKCC,KALD,CAKO,UAASC,GAAT,EAAc;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAwBF,GAApC;AACD,KAPD;AASAjB,IAAAA,KAAK,CAACoB,gBAAN,CAAuB,SAAvB,EAAkC,UAASC,EAAT,EAAY;AAC5C,UAAI,CAACtB,SAAL,EAAgB;AACdD,QAAAA,MAAM,GAAGE,KAAK,CAACsB,WAAN,IAAqBtB,KAAK,CAACuB,UAAN,GAAiB1B,KAAtC,CAAT,CADc,CAGd;AACA;;AAEA,YAAI2B,KAAK,CAAC1B,MAAD,CAAT,EAAmB;AACjBA,UAAAA,MAAM,GAAGD,KAAK,IAAI,IAAE,CAAN,CAAd;AACD;;AAEDG,QAAAA,KAAK,CAACyB,YAAN,CAAmB,OAAnB,EAA4B5B,KAA5B;AACAG,QAAAA,KAAK,CAACyB,YAAN,CAAmB,QAAnB,EAA6B3B,MAA7B;AACAG,QAAAA,MAAM,CAACwB,YAAP,CAAoB,OAApB,EAA6B5B,KAA7B;AACAI,QAAAA,MAAM,CAACwB,YAAP,CAAoB,QAApB,EAA8B3B,MAA9B;AACAC,QAAAA,SAAS,GAAG,IAAZ;AACD;AACF,KAjBD,EAiBG,KAjBH;AAmBAI,IAAAA,WAAW,CAACiB,gBAAZ,CAA6B,OAA7B,EAAsC,UAASC,EAAT,EAAY;AAChDK,MAAAA,WAAW;AACXL,MAAAA,EAAE,CAACM,cAAH;AACD,KAHD,EAGG,KAHH;AAKAC,IAAAA,UAAU;AACX,GA9Dc,CAgEf;AACA;;;AAEA,WAASA,UAAT,GAAsB;AACpB,QAAIC,OAAO,GAAG5B,MAAM,CAAC6B,UAAP,CAAkB,IAAlB,CAAd;AACAD,IAAAA,OAAO,CAACE,SAAR,GAAoB,MAApB;AACAF,IAAAA,OAAO,CAACG,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuB/B,MAAM,CAACJ,KAA9B,EAAqCI,MAAM,CAACH,MAA5C;AAEA,QAAImC,IAAI,GAAGhC,MAAM,CAACiC,SAAP,CAAiB,WAAjB,CAAX;AACAhC,IAAAA,KAAK,CAACuB,YAAN,CAAmB,KAAnB,EAA0BQ,IAA1B;AACD,GA1Ec,CA4Ef;AACA;AACA;AACA;AACA;;;AAEA,WAASP,WAAT,GAAuB;AACrB,QAAIG,OAAO,GAAG5B,MAAM,CAAC6B,UAAP,CAAkB,IAAlB,CAAd;;AACA,QAAIjC,KAAK,IAAIC,MAAb,EAAqB;AACnBG,MAAAA,MAAM,CAACJ,KAAP,GAAeA,KAAf;AACAI,MAAAA,MAAM,CAACH,MAAP,GAAgBA,MAAhB;AACA+B,MAAAA,OAAO,CAACM,SAAR,CAAkBnC,KAAlB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+BH,KAA/B,EAAsCC,MAAtC;AAEA,UAAImC,IAAI,GAAGhC,MAAM,CAACiC,SAAP,CAAiB,WAAjB,CAAX;AACAhC,MAAAA,KAAK,CAACuB,YAAN,CAAmB,KAAnB,EAA0BQ,IAA1B;AACD,KAPD,MAOO;AACLL,MAAAA,UAAU;AACX;AACF,GA9Fc,CAgGf;AACA;;;AACAQ,EAAAA,MAAM,CAAChB,gBAAP,CAAwB,MAAxB,EAAgChB,OAAhC,EAAyC,KAAzC;AACD;;KAnGMR,M;AAmGN;AAED,eAAeA,MAAf","sourcesContent":["/*\nfunction Camera() {\n    return(\n        <div className='camera'>\n            <label>\n                <input  id=\"camera\"\n                        style={{display: 'none'}}\n                        type=\"file\" \n                        accept=\"image/*\"\n                        capture=\"camera\"\n                        onChange={readURL(this)}\n                />\n                Camera\n            </label>\n        </div>\n    );\n}\n\nfunction saveImage() {\n    const input = document.getElementById('camera');\n\n    if (input != null){\n        input.onchange = (function(e) {\n            const file = e.path[0].files[0];\n            var image = document.createElement('img');\n            const reader = new FileReader();\n\n            reader.onload = function(event) {\n                image.src = event.target.result;\n            };\n\n            reader.readAsDataURL(file);\n            document.getElementById(\"popup\").appendChild(image);\n        });\n    }\n}\n\nfunction readURL(input){\n    var image = document.createElement('img');\n\n    //console.log(input);\n    \n    if (input !== undefined) {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n            image.src = e.target.result;\n        }\n       \n        reader.readAsDataURL(input.files[0]);\n        document.getElementById(\"popup\").appendChild(image);\n    }\n}\n\n*/\n\nimport { FreeCameraOptions } from \"mapbox-gl\";\n\n/*\nfunction CameraContainer() {\n    return (\n        <div>\n            <button id=\"camera\">Camera</button>\n            <video autoplay></video>\n            <script src=\"https://webrtc.github.io/adapter/adapter-latest.js\"></script>\n        </div>\n    )\n}\n\nfunction CameraOnClick() {\n    document.querySelector('#camera').addEventListener('click', async function init(e) {\n        try {\n          const stream = await navigator.mediaDevices.getUserMedia({\n            audio: false,\n            video: true\n          })\n          const videoTracks = stream.getVideoTracks()\n          const track = videoTracks[0]\n          alert(`Getting video from: ${track.label}`)\n          document.querySelector('video').srcObject = stream\n          document.querySelector('#camera').setAttribute('hidden', true)\n        } catch (error) {\n          alert(`${error.name}`)\n          console.error(error)\n        }\n    })\n}\n\nvar takePhotoButton = document.querySelector('button#takePhoto');\nvar canvas = document.querySelector('canvas');\n\ntakePhotoButton.onclick = takePhoto;\n\n// Get a Blob from the currently selected camera source and\n// display this with an img element.\nfunction takePhoto() {\n  imageCapture.takePhoto().then(function(blob) {\n    console.log('Took photo:', blob);\n    img.classList.remove('hidden');\n    img.src = URL.createObjectURL(blob);\n  }).catch(function(error) {\n    console.log('takePhoto() error: ', error);\n  });\n}\n\nexport default Camera\n*/\n\n\nfunction Camera () {\n    // The width and height of the captured photo. We will set the\n    // width to the value defined here, but the height will be\n    // calculated based on the aspect ratio of the input stream.\n  \n    var width = 320;    // We will scale the photo width to this\n    var height = 0;     // This will be computed based on the input stream\n  \n    // |streaming| indicates whether or not we're currently streaming\n    // video from the camera. Obviously, we start at false.\n  \n    var streaming = false;\n  \n    // The various HTML elements we need to configure or control. These\n    // will be set by the startup() function.\n  \n    var video = null;\n    var canvas = null;\n    var photo = null;\n    var startbutton = null;\n  \n    function startup() {\n      if (showViewLiveResultButton()) { return; }\n      video = document.getElementById('video');\n      canvas = document.getElementById('canvas');\n      photo = document.getElementById('photo');\n      startbutton = document.getElementById('startbutton');\n  \n      navigator.mediaDevices.getUserMedia({video: true, audio: false})\n      .then(function(stream) {\n        video.srcObject = stream;\n        video.play();\n      })\n      .catch(function(err) {\n        console.log(\"An error occurred: \" + err);\n      });\n  \n      video.addEventListener('canplay', function(ev){\n        if (!streaming) {\n          height = video.videoHeight / (video.videoWidth/width);\n        \n          // Firefox currently has a bug where the height can't be read from\n          // the video, so we will make assumptions if this happens.\n        \n          if (isNaN(height)) {\n            height = width / (4/3);\n          }\n        \n          video.setAttribute('width', width);\n          video.setAttribute('height', height);\n          canvas.setAttribute('width', width);\n          canvas.setAttribute('height', height);\n          streaming = true;\n        }\n      }, false);\n  \n      startbutton.addEventListener('click', function(ev){\n        takepicture();\n        ev.preventDefault();\n      }, false);\n      \n      clearphoto();\n    }\n  \n    // Fill the photo with an indication that none has been\n    // captured.\n  \n    function clearphoto() {\n      var context = canvas.getContext('2d');\n      context.fillStyle = \"#AAA\";\n      context.fillRect(0, 0, canvas.width, canvas.height);\n  \n      var data = canvas.toDataURL('image/png');\n      photo.setAttribute('src', data);\n    }\n    \n    // Capture a photo by fetching the current contents of the video\n    // and drawing it into a canvas, then converting that to a PNG\n    // format data URL. By drawing it on an offscreen canvas and then\n    // drawing that to the screen, we can change its size and/or apply\n    // other changes before drawing it.\n  \n    function takepicture() {\n      var context = canvas.getContext('2d');\n      if (width && height) {\n        canvas.width = width;\n        canvas.height = height;\n        context.drawImage(video, 0, 0, width, height);\n      \n        var data = canvas.toDataURL('image/png');\n        photo.setAttribute('src', data);\n      } else {\n        clearphoto();\n      }\n    }\n  \n    // Set up our event listener to run the startup process\n    // once loading is complete.\n    window.addEventListener('load', startup, false);\n  };\n  \n  export default Camera"]},"metadata":{},"sourceType":"module"}