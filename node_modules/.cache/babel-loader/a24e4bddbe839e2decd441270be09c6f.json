{"ast":null,"code":"var _jsxFileName = \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/MapContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from 'react';\nimport { onValue } from \"firebase/database\";\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css'; //Must have this otherwise pins don't anchor\n\nimport connect_to_firebase from './query/connect_to_firebase.js';\nimport sidebar from './Sidebar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = 'pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA';\n\nfunction makeFullScreen(item) {\n  if (item.requestFullscreen) {\n    item.requestFullscreen();\n  }\n}\n\nconst MapContainer = () => {\n  _s();\n\n  const mapContainer = useRef(null);\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf',\n      center: [-90.221932, 38.632511],\n      zoom: 15\n    });\n    map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n    map.addControl(new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      trackUserLocation: true,\n      showUserHeading: true\n    }));\n    onValue(connect_to_firebase, snapshot => {\n      const data = snapshot.val();\n      data.forEach(element => {\n        const marker = new mapboxgl.Marker();\n        var long = element.lng;\n        var lat = element.lat;\n        marker.setLngLat([long, lat]);\n        marker.addTo(map);\n        marker.getElement().addEventListener('click', () => {\n          //Asks user permission for camera\n          const constraints = {\n            video: {\n              width: {\n                min: 1280,\n                ideal: 1920,\n                max: 2560\n              },\n              height: {\n                min: 720,\n                ideal: 1080,\n                max: 1440\n              }\n            }\n          };\n\n          const stream = async () => {\n            await navigator.mediaDevices.getUserMedia(constraints);\n          };\n\n          sidebar(stream); //Variables for sidebar divs\n\n          var location_info_div = document.getElementById('location_info_row');\n          var legacy_photo_div = document.getElementById('legacy_photo_row');\n          var user_photo_div = document.getElementById('user_photo_row'); //Make popup visible by modifying height\n\n          document.getElementById(\"popup\").style.height = \"50%\"; //Clear each div of past elements\n\n          while (location_info_div.childElementCount > 0) {\n            location_info_div.removeChild(location_info_div.lastChild);\n          }\n\n          while (legacy_photo_div.childElementCount > 0) {\n            legacy_photo_div.removeChild(legacy_photo_div.lastChild);\n          }\n\n          while (user_photo_div.childElementCount > 0) {\n            user_photo_div.removeChild(user_photo_div.lastChild);\n          } //Initialize the name and date elements\n\n\n          var name_par = document.createElement('h1');\n          var name = document.createTextNode(element.Name);\n          name_par.id = 'location_name';\n          name_par.appendChild(name);\n          location_info_div.appendChild(name_par);\n\n          if (element.date !== \"NA\") {\n            var date_par = document.createElement('p');\n            var date = document.createTextNode(element.date);\n            date_par.id = 'location_date';\n            date_par.appendChild(date);\n            location_info_div.appendChild(date_par);\n          }\n\n          var image = document.createElement('img');\n          image.id = \"thumb_image\";\n          image.src = element.image_url;\n          legacy_photo_div.appendChild(image);\n          var image2_electricboogaloo = document.createElement('img');\n          image2_electricboogaloo.id = \"thumb_image\";\n          image2_electricboogaloo.src = element.image_url;\n          legacy_photo_div.appendChild(image2_electricboogaloo);\n          var user_image = document.createElement('img');\n          user_image.id = \"thumb_image\";\n          user_image.src = \"https://www.slu.edu/news/img/2019-news-newslink/january-pics/chaifetz-arial-min.jpg\";\n          user_photo_div.appendChild(user_image);\n          /*document.addEventListener('click', function(e){\n              var target = e.target\n              if (target.id == \"thumb_img\" && target.classList.contains('canfullscreen')){\n                  if (document.fullscreenElement){ // if browser is currently not in full screen\n                      target.requestFullscreen();\n                  }\n                  else{\n                      target.exitFullscreen();\n                  }\n              }\n          }, false) */\n          //Add pictures to bottom div\n          //Create container for each image of size x by y\n          //When clicking an image, view fullscreen version of image\n\n          /*var node = document.createElement('a');\n          var name = document.createTextNode(element.Name);\n          node.appendChild(name);\n          document.getElementById(\"popup\").appendChild(node);\n          \n          var image = document.createElement('img');\n          image.src = element.image_url;\n          document.getElementById(\"popup\").appendChild(image);*/\n        });\n      });\n    }); //TODO: Create radio button to change between labeled and non-labeled styles\n    //map.setStyle('mapbox://styles/mapbox/outdoors-v11');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    style: {\n      height: '100vh'\n    },\n    ref: mapContainer\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 12\n  }, this);\n};\n\n_s(MapContainer, \"6zcGo6SVCAaKoYrOkDL9zc4/xh8=\");\n\n_c = MapContainer;\nexport default MapContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapContainer\");","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/MapContainer.js"],"names":["React","useRef","useEffect","onValue","mapboxgl","connect_to_firebase","sidebar","accessToken","makeFullScreen","item","requestFullscreen","MapContainer","mapContainer","map","Map","container","current","style","center","zoom","addControl","NavigationControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","showUserHeading","snapshot","data","val","forEach","element","marker","Marker","long","lng","lat","setLngLat","addTo","getElement","addEventListener","constraints","video","width","min","ideal","max","height","stream","navigator","mediaDevices","getUserMedia","location_info_div","document","getElementById","legacy_photo_div","user_photo_div","childElementCount","removeChild","lastChild","name_par","createElement","name","createTextNode","Name","id","appendChild","date","date_par","image","src","image_url","image2_electricboogaloo","user_image"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { onValue } from \"firebase/database\";\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css' //Must have this otherwise pins don't anchor\nimport connect_to_firebase from './query/connect_to_firebase.js';\nimport sidebar from './Sidebar';\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA';\n\n\nfunction makeFullScreen(item) {\n    if (item.requestFullscreen){\n        item.requestFullscreen() \n    }\n}\n\nconst MapContainer = () => {\n    const mapContainer = useRef(null);\n   \n    useEffect(() => {\n        const map = new mapboxgl.Map({\n            container: mapContainer.current,\n            style: 'mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf',\n            center: [-90.221932, 38.632511],\n            zoom: 15\n        });\n\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n\n        map.addControl(new mapboxgl.GeolocateControl(\n            {\n                positionOptions: {\n                    enableHighAccuracy: true\n                },\n                trackUserLocation: true,\n                showUserHeading: true\n            })\n        );\n\n        onValue(connect_to_firebase, (snapshot) => {\n            const data = snapshot.val();\n            data.forEach(element => {\n                const marker = new mapboxgl.Marker();\n                var long = element.lng;\n                var lat = element.lat;\n                marker.setLngLat([long,lat]);\n                marker.addTo(map);\n\n                marker.getElement().addEventListener('click', () => {\n                    //Asks user permission for camera\n                    const constraints = {\n                        video: {\n                            width: {\n                            min: 1280,\n                            ideal: 1920,\n                            max: 2560,\n                            },\n                            height: {\n                            min: 720,\n                            ideal: 1080,\n                            max: 1440\n                            },\n                        }\n                    };\n                    const stream = async () => {await navigator.mediaDevices.getUserMedia(constraints)};\n                    sidebar(stream);\n\n                    //Variables for sidebar divs\n                    var location_info_div = document.getElementById('location_info_row');\n                    var legacy_photo_div = document.getElementById('legacy_photo_row');\n                    var user_photo_div = document.getElementById('user_photo_row');\n\n                    //Make popup visible by modifying height\n                    document.getElementById(\"popup\").style.height = \"50%\";\n\n                    //Clear each div of past elements\n                    while(location_info_div.childElementCount > 0) {\n                        location_info_div.removeChild(location_info_div.lastChild);\n                    }\n                    while(legacy_photo_div.childElementCount > 0) {\n                        legacy_photo_div.removeChild(legacy_photo_div.lastChild);\n                    }\n                    while(user_photo_div.childElementCount > 0) {\n                        user_photo_div.removeChild(user_photo_div.lastChild);\n                    }\n\n                    //Initialize the name and date elements\n                    var name_par = document.createElement('h1');\n                    var name = document.createTextNode(element.Name);\n                    name_par.id = 'location_name'\n                    name_par.appendChild(name);\n                    location_info_div.appendChild(name_par);\n                    if (element.date !== \"NA\") {\n                        var date_par = document.createElement('p');\n                        var date = document.createTextNode(element.date);\n                        date_par.id = 'location_date'\n                        date_par.appendChild(date);\n                        location_info_div.appendChild(date_par);\n                    }\n\n                    var image = document.createElement('img');\n                    image.id = \"thumb_image\";\n                    image.src = element.image_url;\n                    legacy_photo_div.appendChild(image);\n\n                    var image2_electricboogaloo = document.createElement('img');\n                    image2_electricboogaloo.id = \"thumb_image\";\n                    image2_electricboogaloo.src = element.image_url;\n                    legacy_photo_div.appendChild(image2_electricboogaloo);\n\n                    var user_image = document.createElement('img');\n                    user_image.id = \"thumb_image\";\n                    user_image.src = \"https://www.slu.edu/news/img/2019-news-newslink/january-pics/chaifetz-arial-min.jpg\"\n                    user_photo_div.appendChild(user_image);\n\n\n                    \n                    /*document.addEventListener('click', function(e){\n                        var target = e.target\n                        if (target.id == \"thumb_img\" && target.classList.contains('canfullscreen')){\n                            if (document.fullscreenElement){ // if browser is currently not in full screen\n                                target.requestFullscreen();\n                            }\n                            else{\n                                target.exitFullscreen();\n                            }\n                        }\n                    }, false) */\n                    \n                    //Add pictures to bottom div\n\n                    //Create container for each image of size x by y\n                    //When clicking an image, view fullscreen version of image\n                    \n\n                    /*var node = document.createElement('a');\n                    var name = document.createTextNode(element.Name);\n                    node.appendChild(name);\n                    document.getElementById(\"popup\").appendChild(node);\n                    \n                    var image = document.createElement('img');\n                    image.src = element.image_url;\n                    document.getElementById(\"popup\").appendChild(image);*/\n                    \n                })\n            })\n        });\n\n        //TODO: Create radio button to change between labeled and non-labeled styles\n        //map.setStyle('mapbox://styles/mapbox/outdoors-v11');\n    }, []);\n\n    return <div className=\"map-container\" style={{height: '100vh'}} ref={ mapContainer } />;\n}\n\nexport default MapContainer;\n"]},"metadata":{},"sourceType":"module"}