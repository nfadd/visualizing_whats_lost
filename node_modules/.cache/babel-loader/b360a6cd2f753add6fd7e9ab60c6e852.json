{"ast":null,"code":"import { getStorage, ref, uploadString } from \"firebase/storage\";\nimport { CameraPreview } from '@capacitor-community/camera-preview';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass Camera {\n  startCamera() {\n    const cameraButton = document.getElementById(\"cameraButton\");\n    cameraButton.style.display = \"none\";\n    const cameraPreview = document.getElementById(\"cameraPreview\");\n    cameraPreview.style.display = \"block\";\n    const popup = document.getElementById(\"popup\");\n    popup.style.height = \"0\";\n    const map = document.getElementById(\"map\");\n    map.style.display = \"none\";\n    const cameraPreviewOptions = {\n      position: 'rear',\n      parent: 'cameraPreview',\n      class: 'cameraPreview',\n      toBack: true\n    };\n    CameraPreview.start(cameraPreviewOptions);\n  }\n\n  async stopCamera() {\n    await CameraPreview.stop();\n    const map = document.getElementById(\"map\");\n    map.style.display = \"block\";\n    const cameraPreview = document.getElementById(\"cameraPreview\");\n    cameraPreview.style.display = \"none\";\n    const cameraButton = document.getElementById(\"cameraButton\");\n    cameraButton.style.display = \"block\";\n    const popup = document.getElementById(\"popup\");\n    popup.style.height = \"50%\";\n  }\n\n  async captureImage(index) {\n    const cameraPreviewOptions = {\n      quality: 90\n    };\n    const result = await CameraPreview.capture(cameraPreviewOptions);\n    const user_photo_div = document.getElementById(\"user_photo_row\");\n    var capturedImage = document.createElement('img');\n    capturedImage.id = \"thumb_image\";\n    capturedImage.alt = uuidv4();\n    capturedImage.src = `data:image/jpeg;base64,${result.value}`;\n    user_photo_div.appendChild(capturedImage);\n    uploadCapturedImage(index, capturedImage);\n    stopCamera();\n  }\n\n  flipCamera() {\n    CameraPreview.flip();\n  }\n\n}\n\nfunction uploadCapturedImage(index, img) {\n  const storage = getStorage();\n  const storageRef = ref(storage, `rowid${index}/${img.alt}`);\n  uploadString(storageRef, img.src, 'data_url').then(snapshot => {\n    console.log('Uploaded a data_url string!');\n  });\n}\n/*\nfunction retrieveCapturedImage(index) {\n    var storageRef = firebase.storage().ref();\n    storageRef.child(`rowid${index}`).getDownloadURL().then(function(url) {\n        document.querySelector('img').src = url;\n    });\n}\n*/\n\n\nexport const {\n  startCamera,\n  stopCamera,\n  captureImage,\n  flipCamera\n} = new Camera();","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/Camera.js"],"names":["getStorage","ref","uploadString","CameraPreview","v4","uuidv4","Camera","startCamera","cameraButton","document","getElementById","style","display","cameraPreview","popup","height","map","cameraPreviewOptions","position","parent","class","toBack","start","stopCamera","stop","captureImage","index","quality","result","capture","user_photo_div","capturedImage","createElement","id","alt","src","value","appendChild","uploadCapturedImage","flipCamera","flip","img","storage","storageRef","then","snapshot","console","log"],"mappings":"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","sourcesContent":["import { getStorage, ref, uploadString } from \"firebase/storage\";\nimport { CameraPreview } from '@capacitor-community/camera-preview';\nimport { v4 as uuidv4 } from 'uuid';\n\nclass Camera {\n\n    startCamera() {\n        const cameraButton = document.getElementById(\"cameraButton\");\n        cameraButton.style.display = \"none\";\n\n        const cameraPreview = document.getElementById(\"cameraPreview\");\n        cameraPreview.style.display = \"block\";\n\n        const popup = document.getElementById(\"popup\")\n        popup.style.height = \"0\";\n\n        const map = document.getElementById(\"map\");\n        map.style.display = \"none\";\n\n\n        const cameraPreviewOptions = {\n            position: 'rear',\n            parent: 'cameraPreview',\n            class: 'cameraPreview',\n            toBack: true,\n        };\n        CameraPreview.start(cameraPreviewOptions);\n    }\n    \n    async stopCamera() {\n        await CameraPreview.stop();\n\n        const map = document.getElementById(\"map\");\n        map.style.display = \"block\";\n\n        const cameraPreview = document.getElementById(\"cameraPreview\");\n        cameraPreview.style.display = \"none\";\n\n        const cameraButton = document.getElementById(\"cameraButton\");\n        cameraButton.style.display = \"block\";\n\n        const popup = document.getElementById(\"popup\")\n        popup.style.height = \"50%\";\n    }\n    \n    async captureImage(index) {\n        const cameraPreviewOptions = {\n            quality: 90,\n        };\n    \n        const result = await CameraPreview.capture(cameraPreviewOptions);\n\n        const user_photo_div = document.getElementById(\"user_photo_row\");\n        var capturedImage = document.createElement('img');\n        capturedImage.id = \"thumb_image\";\n        capturedImage.alt = uuidv4();\n        capturedImage.src = `data:image/jpeg;base64,${result.value}`;\n        user_photo_div.appendChild(capturedImage);\n\n        uploadCapturedImage(index, capturedImage);\n\n        stopCamera();\n    }\n    \n    flipCamera() {\n        CameraPreview.flip();\n    }\n}\n\nfunction uploadCapturedImage(index, img) {\n    const storage = getStorage();\n    const storageRef = ref(storage, `rowid${index}/${img.alt}`);\n\n    uploadString(storageRef, img.src, 'data_url').then((snapshot) => {\n        console.log('Uploaded a data_url string!');\n    });\n}\n\n/*\nfunction retrieveCapturedImage(index) {\n    var storageRef = firebase.storage().ref();\n    storageRef.child(`rowid${index}`).getDownloadURL().then(function(url) {\n        document.querySelector('img').src = url;\n    });\n}\n*/\n\nexport const { startCamera, stopCamera, captureImage, flipCamera } = new Camera();"]},"metadata":{},"sourceType":"module"}