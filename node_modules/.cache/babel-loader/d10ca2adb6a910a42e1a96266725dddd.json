{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { WebPlugin } from \"@capacitor/core\";\nexport var CameraPreviewWeb = /*#__PURE__*/function (_WebPlugin) {\n  _inherits(CameraPreviewWeb, _WebPlugin);\n\n  var _super = _createSuper(CameraPreviewWeb);\n\n  function CameraPreviewWeb() {\n    _classCallCheck(this, CameraPreviewWeb);\n\n    return _super.call(this, {\n      name: \"CameraPreview\",\n      platforms: [\"web\"]\n    });\n  }\n\n  _createClass(CameraPreviewWeb, [{\n    key: \"start\",\n    value: function () {\n      var _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(options) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n                    var video, parent, videoElement, userAgent, isSafari, constraints;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return navigator.mediaDevices.getUserMedia({\n                              audio: !options.disableAudio,\n                              video: true\n                            }).then(function (stream) {\n                              // Stop any existing stream so we can request media with different constraints based on user input\n                              stream.getTracks().forEach(function (track) {\n                                return track.stop();\n                              });\n                            }).catch(function (error) {\n                              reject(error);\n                            });\n\n                          case 2:\n                            video = document.getElementById(\"video\");\n                            parent = document.getElementById(options.parent);\n\n                            if (!video) {\n                              videoElement = document.createElement(\"video\");\n                              videoElement.id = \"video\";\n                              videoElement.setAttribute(\"class\", options.className || \"\"); // Don't flip video feed if camera is rear facing\n\n                              // Don't flip video feed if camera is rear facing\n                              if (options.position !== 'rear') {\n                                videoElement.setAttribute(\"style\", \"-webkit-transform: scaleX(-1); transform: scaleX(-1);\");\n                              }\n\n                              userAgent = navigator.userAgent.toLowerCase();\n                              isSafari = userAgent.includes('safari') && !userAgent.includes('chrome'); // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                              // Without these attributes videoElement.play() will throw a NotAllowedError\n                              // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n\n                              // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                              // Without these attributes videoElement.play() will throw a NotAllowedError\n                              // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n                              if (isSafari) {\n                                videoElement.setAttribute('autoplay', 'true');\n                                videoElement.setAttribute('muted', 'true');\n                                videoElement.setAttribute('playsinline', 'true');\n                              }\n\n                              parent.appendChild(videoElement);\n\n                              if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                                constraints = {\n                                  video: true\n                                };\n\n                                if (options.position === 'rear') {\n                                  constraints.video = {\n                                    facingMode: 'environment'\n                                  };\n                                  _this.isBackCamera = true;\n                                } else {\n                                  _this.isBackCamera = false;\n                                }\n\n                                navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                                  //video.src = window.URL.createObjectURL(stream);\n                                  videoElement.srcObject = stream;\n                                  videoElement.play();\n                                  resolve({});\n                                }, function (err) {\n                                  reject(err);\n                                });\n                              }\n                            } else {\n                              reject({\n                                message: \"camera already started\"\n                              });\n                            }\n\n                          case 5:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function start(_x) {\n        return _start.apply(this, arguments);\n      }\n\n      return start;\n    }()\n  }, {\n    key: \"stop\",\n    value: function () {\n      var _stop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var video, st, tracks, i, track;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                video = document.getElementById(\"video\");\n\n                if (video) {\n                  video.pause();\n                  st = video.srcObject;\n                  tracks = st.getTracks();\n\n                  for (i = 0; i < tracks.length; i++) {\n                    track = tracks[i];\n                    track.stop();\n                  }\n\n                  video.remove();\n                }\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function stop() {\n        return _stop.apply(this, arguments);\n      }\n\n      return stop;\n    }()\n  }, {\n    key: \"capture\",\n    value: function () {\n      var _capture = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_options) {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", new Promise(function (resolve, _) {\n                  var video = document.getElementById(\"video\");\n                  var canvas = document.createElement(\"canvas\"); // video.width = video.offsetWidth;\n\n                  // video.width = video.offsetWidth;\n                  var context = canvas.getContext(\"2d\");\n                  canvas.width = video.videoWidth;\n                  canvas.height = video.videoHeight; // flip horizontally back camera isn't used\n\n                  // flip horizontally back camera isn't used\n                  if (!_this2.isBackCamera) {\n                    context.translate(video.videoWidth, 0);\n                    context.scale(-1, 1);\n                  }\n\n                  context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n                  resolve({\n                    value: canvas.toDataURL(\"image/png\").replace(\"data:image/png;base64,\", \"\")\n                  });\n                }));\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function capture(_x4) {\n        return _capture.apply(this, arguments);\n      }\n\n      return capture;\n    }()\n  }, {\n    key: \"captureSample\",\n    value: function () {\n      var _captureSample = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_options) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", this.capture(_options));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function captureSample(_x5) {\n        return _captureSample.apply(this, arguments);\n      }\n\n      return captureSample;\n    }()\n  }, {\n    key: \"getSupportedFlashModes\",\n    value: function () {\n      var _getSupportedFlashModes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                throw new Error('getSupportedFlashModes not supported under the web platform');\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function getSupportedFlashModes() {\n        return _getSupportedFlashModes.apply(this, arguments);\n      }\n\n      return getSupportedFlashModes;\n    }()\n  }, {\n    key: \"setFlashMode\",\n    value: function () {\n      var _setFlashMode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_options) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                throw new Error('setFlashMode not supported under the web platform');\n\n              case 1:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function setFlashMode(_x6) {\n        return _setFlashMode.apply(this, arguments);\n      }\n\n      return setFlashMode;\n    }()\n  }, {\n    key: \"flip\",\n    value: function () {\n      var _flip = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                throw new Error('flip not supported under the web platform');\n\n              case 1:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      function flip() {\n        return _flip.apply(this, arguments);\n      }\n\n      return flip;\n    }()\n  }, {\n    key: \"setOpacity\",\n    value: function () {\n      var _setOpacity = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(_options) {\n        var video;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                video = document.getElementById(\"video\");\n\n                if (!!video && !!_options['opacity']) {\n                  video.style.setProperty(\"opacity\", _options['opacity'].toString());\n                }\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function setOpacity(_x7) {\n        return _setOpacity.apply(this, arguments);\n      }\n\n      return setOpacity;\n    }()\n  }]);\n\n  return CameraPreviewWeb;\n}(WebPlugin);\nvar CameraPreview = new CameraPreviewWeb();\nexport { CameraPreview };\nimport { registerWebPlugin } from \"@capacitor/core\";\nregisterWebPlugin(CameraPreview);","map":{"version":3,"sources":["../../src/web.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { WebPlugin } from \"@capacitor/core\";\nexport class CameraPreviewWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: \"CameraPreview\",\n            platforms: [\"web\"],\n        });\n    }\n    async start(options) {\n        return new Promise(async (resolve, reject) => {\n            await navigator.mediaDevices.getUserMedia({\n                audio: !options.disableAudio,\n                video: true\n            }).then((stream) => {\n                // Stop any existing stream so we can request media with different constraints based on user input\n                stream.getTracks().forEach((track) => track.stop());\n            }).catch(error => {\n                reject(error);\n            });\n            const video = document.getElementById(\"video\");\n            const parent = document.getElementById(options.parent);\n            if (!video) {\n                const videoElement = document.createElement(\"video\");\n                videoElement.id = \"video\";\n                videoElement.setAttribute(\"class\", options.className || \"\");\n                // Don't flip video feed if camera is rear facing\n                if (options.position !== 'rear') {\n                    videoElement.setAttribute(\"style\", \"-webkit-transform: scaleX(-1); transform: scaleX(-1);\");\n                }\n                const userAgent = navigator.userAgent.toLowerCase();\n                const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');\n                // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                // Without these attributes videoElement.play() will throw a NotAllowedError\n                // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n                if (isSafari) {\n                    videoElement.setAttribute('autoplay', 'true');\n                    videoElement.setAttribute('muted', 'true');\n                    videoElement.setAttribute('playsinline', 'true');\n                }\n                parent.appendChild(videoElement);\n                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                    const constraints = {\n                        video: true,\n                    };\n                    if (options.position === 'rear') {\n                        constraints.video = { facingMode: 'environment' };\n                        this.isBackCamera = true;\n                    }\n                    else {\n                        this.isBackCamera = false;\n                    }\n                    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        //video.src = window.URL.createObjectURL(stream);\n                        videoElement.srcObject = stream;\n                        videoElement.play();\n                        resolve({});\n                    }, (err) => {\n                        reject(err);\n                    });\n                }\n            }\n            else {\n                reject({ message: \"camera already started\" });\n            }\n        });\n    }\n    async stop() {\n        const video = document.getElementById(\"video\");\n        if (video) {\n            video.pause();\n            const st = video.srcObject;\n            const tracks = st.getTracks();\n            for (var i = 0; i < tracks.length; i++) {\n                var track = tracks[i];\n                track.stop();\n            }\n            video.remove();\n        }\n    }\n    async capture(_options) {\n        return new Promise((resolve, _) => {\n            const video = document.getElementById(\"video\");\n            const canvas = document.createElement(\"canvas\");\n            // video.width = video.offsetWidth;\n            const context = canvas.getContext(\"2d\");\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            // flip horizontally back camera isn't used\n            if (!this.isBackCamera) {\n                context.translate(video.videoWidth, 0);\n                context.scale(-1, 1);\n            }\n            context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n            resolve({\n                value: canvas\n                    .toDataURL(\"image/png\")\n                    .replace(\"data:image/png;base64,\", \"\"),\n            });\n        });\n    }\n    async captureSample(_options) {\n        return this.capture(_options);\n    }\n    async getSupportedFlashModes() {\n        throw new Error('getSupportedFlashModes not supported under the web platform');\n    }\n    async setFlashMode(_options) {\n        throw new Error('setFlashMode not supported under the web platform');\n    }\n    async flip() {\n        throw new Error('flip not supported under the web platform');\n    }\n    async setOpacity(_options) {\n        const video = document.getElementById(\"video\");\n        if (!!video && !!_options['opacity']) {\n            video.style.setProperty(\"opacity\", _options['opacity'].toString());\n        }\n    }\n}\nconst CameraPreview = new CameraPreviewWeb();\nexport { CameraPreview };\nimport { registerWebPlugin } from \"@capacitor/core\";\nregisterWebPlugin(CameraPreview);\n//# sourceMappingURL=web.js.map"]},"metadata":{},"sourceType":"module"}