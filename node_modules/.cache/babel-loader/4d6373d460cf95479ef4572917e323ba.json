{"ast":null,"code":"import React,{useRef,useEffect}from'react';import{onValue}from\"firebase/database\";import mapboxgl from'mapbox-gl';import'mapbox-gl/dist/mapbox-gl.css';//Must have this otherwise pins don't anchor\nimport connect_to_firebase from'./query/connect_to_firebase.js';import{jsx as _jsx}from\"react/jsx-runtime\";mapboxgl.accessToken='pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA';var MapContainer=function MapContainer(){var mapContainer=useRef(null);useEffect(function(){var map=new mapboxgl.Map({container:mapContainer.current,style:'mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf',center:[-90.221932,38.632511],zoom:15});map.addControl(new mapboxgl.NavigationControl(),'top-right');onValue(connect_to_firebase,function(snapshot){var data=snapshot.val();data.forEach(function(element){var marker=new mapboxgl.Marker();var long=element.lng;var lat=element.lat;marker.setLngLat([long,lat]);marker.addTo(map);marker.getElement().addEventListener('click',function(){var temp=document.getElementById(\"popup\");while(temp.childElementCount>1){temp.removeChild(temp.lastChild);}document.getElementById(\"popup\").style.height=\"50%\";var node=document.createElement('a');var name=document.createTextNode(element.Name);node.appendChild(name);document.getElementById(\"popup\").appendChild(node);var image=document.createElement('img');image.src=element.image_url;document.getElementById(\"popup\").appendChild(image);});});});//TODO: Create radio button to change between labeled and non-labeled styles\n//map.setStyle('mapbox://styles/mapbox/outdoors-v11');\n},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",style:{height:'100vh'},ref:mapContainer});};export default MapContainer;","map":{"version":3,"sources":["/Users/nickfaddis/Desktop/SLU/csCapstone/visualizing_whats_lost/react-capacitor-example/src/MapContainer.js"],"names":["React","useRef","useEffect","onValue","mapboxgl","connect_to_firebase","accessToken","MapContainer","mapContainer","map","Map","container","current","style","center","zoom","addControl","NavigationControl","snapshot","data","val","forEach","element","marker","Marker","long","lng","lat","setLngLat","addTo","getElement","addEventListener","temp","document","getElementById","childElementCount","removeChild","lastChild","height","node","createElement","name","createTextNode","Name","appendChild","image","src","image_url"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,OAASC,OAAT,KAAwB,mBAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAO,8BAAP,CAAsC;AACtC,MAAOC,CAAAA,mBAAP,KAAgC,gCAAhC,C,2CAEAD,QAAQ,CAACE,WAAT,CAAuB,+FAAvB,CAGA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMC,CAAAA,YAAY,CAAGP,MAAM,CAAC,IAAD,CAA3B,CAEAC,SAAS,CAAC,UAAM,CACZ,GAAMO,CAAAA,GAAG,CAAG,GAAIL,CAAAA,QAAQ,CAACM,GAAb,CAAiB,CACzBC,SAAS,CAAEH,YAAY,CAACI,OADC,CAEzBC,KAAK,CAAE,sDAFkB,CAGzBC,MAAM,CAAE,CAAC,CAAC,SAAF,CAAa,SAAb,CAHiB,CAIzBC,IAAI,CAAE,EAJmB,CAAjB,CAAZ,CAOAN,GAAG,CAACO,UAAJ,CAAe,GAAIZ,CAAAA,QAAQ,CAACa,iBAAb,EAAf,CAAiD,WAAjD,EAEAd,OAAO,CAACE,mBAAD,CAAsB,SAACa,QAAD,CAAc,CACvC,GAAMC,CAAAA,IAAI,CAAGD,QAAQ,CAACE,GAAT,EAAb,CACAD,IAAI,CAACE,OAAL,CAAa,SAAAC,OAAO,CAAI,CACpB,GAAMC,CAAAA,MAAM,CAAG,GAAInB,CAAAA,QAAQ,CAACoB,MAAb,EAAf,CACA,GAAIC,CAAAA,IAAI,CAAGH,OAAO,CAACI,GAAnB,CACA,GAAIC,CAAAA,GAAG,CAAGL,OAAO,CAACK,GAAlB,CACAJ,MAAM,CAACK,SAAP,CAAiB,CAACH,IAAD,CAAME,GAAN,CAAjB,EACAJ,MAAM,CAACM,KAAP,CAAapB,GAAb,EAEAc,MAAM,CAACO,UAAP,GAAoBC,gBAApB,CAAqC,OAArC,CAA8C,UAAM,CAChD,GAAIC,CAAAA,IAAI,CAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAX,CACA,MAAMF,IAAI,CAACG,iBAAL,CAAyB,CAA/B,CAAkC,CAC9BH,IAAI,CAACI,WAAL,CAAiBJ,IAAI,CAACK,SAAtB,EACH,CAEDJ,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCrB,KAAjC,CAAuCyB,MAAvC,CAAgD,KAAhD,CAEA,GAAIC,CAAAA,IAAI,CAAGN,QAAQ,CAACO,aAAT,CAAuB,GAAvB,CAAX,CACA,GAAIC,CAAAA,IAAI,CAAGR,QAAQ,CAACS,cAAT,CAAwBpB,OAAO,CAACqB,IAAhC,CAAX,CACAJ,IAAI,CAACK,WAAL,CAAiBH,IAAjB,EACAR,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCU,WAAjC,CAA6CL,IAA7C,EAEA,GAAIM,CAAAA,KAAK,CAAGZ,QAAQ,CAACO,aAAT,CAAuB,KAAvB,CAAZ,CACAK,KAAK,CAACC,GAAN,CAAYxB,OAAO,CAACyB,SAApB,CACAd,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCU,WAAjC,CAA6CC,KAA7C,EACH,CAhBD,EAiBH,CAxBD,EAyBH,CA3BM,CAAP,CA6BA;AACA;AACH,CAzCQ,CAyCN,EAzCM,CAAT,CA2CA,mBAAO,YAAK,SAAS,CAAC,eAAf,CAA+B,KAAK,CAAE,CAACP,MAAM,CAAE,OAAT,CAAtC,CAAyD,GAAG,CAAG9B,YAA/D,EAAP,CACH,CA/CD,CAiDA,cAAeD,CAAAA,YAAf","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { onValue } from \"firebase/database\";\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css' //Must have this otherwise pins don't anchor\nimport connect_to_firebase from './query/connect_to_firebase.js';\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoibmlja2ZhZGRpcyIsImEiOiJja3Vwemt0amwwbnVoMnZwZ2dreW81OTQwIn0.qerYpAFHJUlYynqbympvAA';\n\n\nconst MapContainer = () => {\n    const mapContainer = useRef(null);\n   \n    useEffect(() => {\n        const map = new mapboxgl.Map({\n            container: mapContainer.current,\n            style: 'mapbox://styles/nickfaddis/ckurogok00w1l18mmby6l9zsf',\n            center: [-90.221932, 38.632511],\n            zoom: 15\n        });\n\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n\n        onValue(connect_to_firebase, (snapshot) => {\n            const data = snapshot.val();\n            data.forEach(element => {\n                const marker = new mapboxgl.Marker();\n                var long = element.lng;\n                var lat = element.lat;\n                marker.setLngLat([long,lat]);\n                marker.addTo(map);\n\n                marker.getElement().addEventListener('click', () => {\n                    var temp = document.getElementById(\"popup\");\n                    while(temp.childElementCount > 1) {\n                        temp.removeChild(temp.lastChild);\n                    }\n\n                    document.getElementById(\"popup\").style.height = \"50%\";\n                    \n                    var node = document.createElement('a');\n                    var name = document.createTextNode(element.Name);\n                    node.appendChild(name);\n                    document.getElementById(\"popup\").appendChild(node);\n                    \n                    var image = document.createElement('img');\n                    image.src = element.image_url;\n                    document.getElementById(\"popup\").appendChild(image);\n                })\n            })\n        });\n\n        //TODO: Create radio button to change between labeled and non-labeled styles\n        //map.setStyle('mapbox://styles/mapbox/outdoors-v11');\n    }, []);\n\n    return <div className=\"map-container\" style={{height: '100vh'}} ref={ mapContainer } />;\n}\n\nexport default MapContainer;\n"]},"metadata":{},"sourceType":"module"}