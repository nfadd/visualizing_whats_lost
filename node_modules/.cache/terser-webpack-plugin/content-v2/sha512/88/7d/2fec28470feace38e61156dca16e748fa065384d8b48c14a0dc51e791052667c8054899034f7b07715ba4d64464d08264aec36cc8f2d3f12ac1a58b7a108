{"code":"(this[\"webpackJsonpreact-capacitor-example\"]=this[\"webpackJsonpreact-capacitor-example\"]||[]).push([[6],{118:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"CameraPreviewWeb\",(function(){return d})),r.d(t,\"CameraPreview\",(function(){return f}));var a=r(2),n=r.n(a),c=r(5),i=r(3),o=r(4),u=r(7),s=r(8),p=r(53),d=function(e){Object(u.a)(r,e);var t=Object(s.a)(r);function r(){return Object(i.a)(this,r),t.call(this,{name:\"CameraPreview\",platforms:[\"web\"]})}return Object(o.a)(r,[{key:\"start\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise(function(){var e=Object(c.a)(n.a.mark((function e(a,c){var i,o,u,s,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!t.disableAudio,video:!0}).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))})).catch((function(e){c(e)}));case 2:i=document.getElementById(\"video\"),o=document.getElementById(t.parent),i?c({message:\"camera already started\"}):((u=document.createElement(\"video\")).id=\"video\",u.setAttribute(\"class\",t.className||\"\"),\"rear\"!==t.position&&u.setAttribute(\"style\",\"-webkit-transform: scaleX(-1); transform: scaleX(-1);\"),s=navigator.userAgent.toLowerCase(),s.includes(\"safari\")&&!s.includes(\"chrome\")&&(u.setAttribute(\"autoplay\",\"true\"),u.setAttribute(\"muted\",\"true\"),u.setAttribute(\"playsinline\",\"true\")),o.appendChild(u),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(p={video:!0},\"rear\"===t.position?(p.video={facingMode:\"environment\"},r.isBackCamera=!0):r.isBackCamera=!1,navigator.mediaDevices.getUserMedia(p).then((function(e){u.srcObject=e,u.play(),a({})}),(function(e){c(e)}))));case 5:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"stop\",value:function(){var e=Object(c.a)(n.a.mark((function e(){var t,r,a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById(\"video\")){for(t.pause(),r=t.srcObject,a=r.getTracks(),c=0;c<a.length;c++)a[c].stop();t.remove()}case 2:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"capture\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e,t){var a=document.getElementById(\"video\"),n=document.createElement(\"canvas\"),c=n.getContext(\"2d\");n.width=a.videoWidth,n.height=a.videoHeight,r.isBackCamera||(c.translate(a.videoWidth,0),c.scale(-1,1)),c.drawImage(a,0,0,a.videoWidth,a.videoHeight),e({value:n.toDataURL(\"image/png\").replace(\"data:image/png;base64,\",\"\")})})));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"captureSample\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",this.capture(t));case 1:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getSupportedFlashModes\",value:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(\"getSupportedFlashModes not supported under the web platform\");case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"setFlashMode\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(\"setFlashMode not supported under the web platform\");case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"flip\",value:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(\"flip not supported under the web platform\");case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"setOpacity\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.getElementById(\"video\"))&&t.opacity&&r.style.setProperty(\"opacity\",t.opacity.toString());case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(p.a),f=new d;Object(p.c)(f)}}]);","name":"static/js/6.fe880a05.chunk.js","map":{"version":3,"sources":["static/js/6.fe880a05.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","CameraPreviewWeb","CameraPreview","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__","_capacitor_core__WEBPACK_IMPORTED_MODULE_6__","_WebPlugin","Object","_super","call","name","platforms","key","value","_start","a","mark","_callee2","options","_this","wrap","_context2","prev","next","abrupt","Promise","_ref","_callee","resolve","reject","video","parent","videoElement","userAgent","constraints","_context","navigator","mediaDevices","getUserMedia","audio","disableAudio","then","stream","getTracks","forEach","track","stop","catch","error","document","getElementById","message","createElement","id","setAttribute","className","position","toLowerCase","includes","appendChild","facingMode","isBackCamera","srcObject","play","err","_x2","_x3","apply","arguments","_x","_stop","_callee3","st","tracks","i","_context3","pause","length","remove","_capture","_callee4","_options","_this2","_context4","_","canvas","context","getContext","width","videoWidth","height","videoHeight","translate","scale","drawImage","toDataURL","replace","_x4","_captureSample","_callee5","_context5","capture","_x5","_getSupportedFlashModes","_callee6","_context6","Error","_setFlashMode","_callee7","_context7","_x6","_flip","_callee8","_context8","_setOpacity","_callee9","_context9","style","setProperty","toString","_x7"],"mappings":"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"},"input":"(this[\"webpackJsonpreact-capacitor-example\"] = this[\"webpackJsonpreact-capacitor-example\"] || []).push([[6],{\n\n/***/ 118:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraPreviewWeb\", function() { return CameraPreviewWeb; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraPreview\", function() { return CameraPreview; });\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3);\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4);\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7);\n/* harmony import */ var _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(8);\n/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(53);\n\n\n\n\n\n\n\nvar CameraPreviewWeb = /*#__PURE__*/function (_WebPlugin) {\n  Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(CameraPreviewWeb, _WebPlugin);\n\n  var _super = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(CameraPreviewWeb);\n\n  function CameraPreviewWeb() {\n    Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this, CameraPreviewWeb);\n\n    return _super.call(this, {\n      name: \"CameraPreview\",\n      platforms: [\"web\"]\n    });\n  }\n\n  Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(CameraPreviewWeb, [{\n    key: \"start\",\n    value: function () {\n      var _start = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(options) {\n        var _this = this;\n\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(resolve, reject) {\n                    var video, parent, videoElement, userAgent, isSafari, constraints;\n                    return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return navigator.mediaDevices.getUserMedia({\n                              audio: !options.disableAudio,\n                              video: true\n                            }).then(function (stream) {\n                              // Stop any existing stream so we can request media with different constraints based on user input\n                              stream.getTracks().forEach(function (track) {\n                                return track.stop();\n                              });\n                            }).catch(function (error) {\n                              reject(error);\n                            });\n\n                          case 2:\n                            video = document.getElementById(\"video\");\n                            parent = document.getElementById(options.parent);\n\n                            if (!video) {\n                              videoElement = document.createElement(\"video\");\n                              videoElement.id = \"video\";\n                              videoElement.setAttribute(\"class\", options.className || \"\"); // Don't flip video feed if camera is rear facing\n\n                              // Don't flip video feed if camera is rear facing\n                              if (options.position !== 'rear') {\n                                videoElement.setAttribute(\"style\", \"-webkit-transform: scaleX(-1); transform: scaleX(-1);\");\n                              }\n\n                              userAgent = navigator.userAgent.toLowerCase();\n                              isSafari = userAgent.includes('safari') && !userAgent.includes('chrome'); // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                              // Without these attributes videoElement.play() will throw a NotAllowedError\n                              // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n\n                              // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                              // Without these attributes videoElement.play() will throw a NotAllowedError\n                              // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n                              if (isSafari) {\n                                videoElement.setAttribute('autoplay', 'true');\n                                videoElement.setAttribute('muted', 'true');\n                                videoElement.setAttribute('playsinline', 'true');\n                              }\n\n                              parent.appendChild(videoElement);\n\n                              if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                                constraints = {\n                                  video: true\n                                };\n\n                                if (options.position === 'rear') {\n                                  constraints.video = {\n                                    facingMode: 'environment'\n                                  };\n                                  _this.isBackCamera = true;\n                                } else {\n                                  _this.isBackCamera = false;\n                                }\n\n                                navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                                  //video.src = window.URL.createObjectURL(stream);\n                                  videoElement.srcObject = stream;\n                                  videoElement.play();\n                                  resolve({});\n                                }, function (err) {\n                                  reject(err);\n                                });\n                              }\n                            } else {\n                              reject({\n                                message: \"camera already started\"\n                              });\n                            }\n\n                          case 5:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function start(_x) {\n        return _start.apply(this, arguments);\n      }\n\n      return start;\n    }()\n  }, {\n    key: \"stop\",\n    value: function () {\n      var _stop = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3() {\n        var video, st, tracks, i, track;\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                video = document.getElementById(\"video\");\n\n                if (video) {\n                  video.pause();\n                  st = video.srcObject;\n                  tracks = st.getTracks();\n\n                  for (i = 0; i < tracks.length; i++) {\n                    track = tracks[i];\n                    track.stop();\n                  }\n\n                  video.remove();\n                }\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function stop() {\n        return _stop.apply(this, arguments);\n      }\n\n      return stop;\n    }()\n  }, {\n    key: \"capture\",\n    value: function () {\n      var _capture = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(_options) {\n        var _this2 = this;\n\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", new Promise(function (resolve, _) {\n                  var video = document.getElementById(\"video\");\n                  var canvas = document.createElement(\"canvas\"); // video.width = video.offsetWidth;\n\n                  // video.width = video.offsetWidth;\n                  var context = canvas.getContext(\"2d\");\n                  canvas.width = video.videoWidth;\n                  canvas.height = video.videoHeight; // flip horizontally back camera isn't used\n\n                  // flip horizontally back camera isn't used\n                  if (!_this2.isBackCamera) {\n                    context.translate(video.videoWidth, 0);\n                    context.scale(-1, 1);\n                  }\n\n                  context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n                  resolve({\n                    value: canvas.toDataURL(\"image/png\").replace(\"data:image/png;base64,\", \"\")\n                  });\n                }));\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function capture(_x4) {\n        return _capture.apply(this, arguments);\n      }\n\n      return capture;\n    }()\n  }, {\n    key: \"captureSample\",\n    value: function () {\n      var _captureSample = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(_options) {\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", this.capture(_options));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function captureSample(_x5) {\n        return _captureSample.apply(this, arguments);\n      }\n\n      return captureSample;\n    }()\n  }, {\n    key: \"getSupportedFlashModes\",\n    value: function () {\n      var _getSupportedFlashModes = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6() {\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                throw new Error('getSupportedFlashModes not supported under the web platform');\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function getSupportedFlashModes() {\n        return _getSupportedFlashModes.apply(this, arguments);\n      }\n\n      return getSupportedFlashModes;\n    }()\n  }, {\n    key: \"setFlashMode\",\n    value: function () {\n      var _setFlashMode = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(_options) {\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                throw new Error('setFlashMode not supported under the web platform');\n\n              case 1:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function setFlashMode(_x6) {\n        return _setFlashMode.apply(this, arguments);\n      }\n\n      return setFlashMode;\n    }()\n  }, {\n    key: \"flip\",\n    value: function () {\n      var _flip = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8() {\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                throw new Error('flip not supported under the web platform');\n\n              case 1:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      function flip() {\n        return _flip.apply(this, arguments);\n      }\n\n      return flip;\n    }()\n  }, {\n    key: \"setOpacity\",\n    value: function () {\n      var _setOpacity = Object(_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee9(_options) {\n        var video;\n        return _Users_nickfaddis_Desktop_SLU_csCapstone_visualizing_whats_lost_react_capacitor_example_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                video = document.getElementById(\"video\");\n\n                if (!!video && !!_options['opacity']) {\n                  video.style.setProperty(\"opacity\", _options['opacity'].toString());\n                }\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      function setOpacity(_x7) {\n        return _setOpacity.apply(this, arguments);\n      }\n\n      return setOpacity;\n    }()\n  }]);\n\n  return CameraPreviewWeb;\n}(_capacitor_core__WEBPACK_IMPORTED_MODULE_6__[/* WebPlugin */ \"a\"]);\nvar CameraPreview = new CameraPreviewWeb();\n\n\nObject(_capacitor_core__WEBPACK_IMPORTED_MODULE_6__[/* registerWebPlugin */ \"c\"])(CameraPreview);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../../src/web.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { WebPlugin } from \"@capacitor/core\";\nexport class CameraPreviewWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: \"CameraPreview\",\n            platforms: [\"web\"],\n        });\n    }\n    async start(options) {\n        return new Promise(async (resolve, reject) => {\n            await navigator.mediaDevices.getUserMedia({\n                audio: !options.disableAudio,\n                video: true\n            }).then((stream) => {\n                // Stop any existing stream so we can request media with different constraints based on user input\n                stream.getTracks().forEach((track) => track.stop());\n            }).catch(error => {\n                reject(error);\n            });\n            const video = document.getElementById(\"video\");\n            const parent = document.getElementById(options.parent);\n            if (!video) {\n                const videoElement = document.createElement(\"video\");\n                videoElement.id = \"video\";\n                videoElement.setAttribute(\"class\", options.className || \"\");\n                // Don't flip video feed if camera is rear facing\n                if (options.position !== 'rear') {\n                    videoElement.setAttribute(\"style\", \"-webkit-transform: scaleX(-1); transform: scaleX(-1);\");\n                }\n                const userAgent = navigator.userAgent.toLowerCase();\n                const isSafari = userAgent.includes('safari') && !userAgent.includes('chrome');\n                // Safari on iOS needs to have the autoplay, muted and playsinline attributes set for video.play() to be successful\n                // Without these attributes videoElement.play() will throw a NotAllowedError\n                // https://developer.apple.com/documentation/webkit/delivering_video_content_for_safari\n                if (isSafari) {\n                    videoElement.setAttribute('autoplay', 'true');\n                    videoElement.setAttribute('muted', 'true');\n                    videoElement.setAttribute('playsinline', 'true');\n                }\n                parent.appendChild(videoElement);\n                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                    const constraints = {\n                        video: true,\n                    };\n                    if (options.position === 'rear') {\n                        constraints.video = { facingMode: 'environment' };\n                        this.isBackCamera = true;\n                    }\n                    else {\n                        this.isBackCamera = false;\n                    }\n                    navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n                        //video.src = window.URL.createObjectURL(stream);\n                        videoElement.srcObject = stream;\n                        videoElement.play();\n                        resolve({});\n                    }, (err) => {\n                        reject(err);\n                    });\n                }\n            }\n            else {\n                reject({ message: \"camera already started\" });\n            }\n        });\n    }\n    async stop() {\n        const video = document.getElementById(\"video\");\n        if (video) {\n            video.pause();\n            const st = video.srcObject;\n            const tracks = st.getTracks();\n            for (var i = 0; i < tracks.length; i++) {\n                var track = tracks[i];\n                track.stop();\n            }\n            video.remove();\n        }\n    }\n    async capture(_options) {\n        return new Promise((resolve, _) => {\n            const video = document.getElementById(\"video\");\n            const canvas = document.createElement(\"canvas\");\n            // video.width = video.offsetWidth;\n            const context = canvas.getContext(\"2d\");\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            // flip horizontally back camera isn't used\n            if (!this.isBackCamera) {\n                context.translate(video.videoWidth, 0);\n                context.scale(-1, 1);\n            }\n            context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n            resolve({\n                value: canvas\n                    .toDataURL(\"image/png\")\n                    .replace(\"data:image/png;base64,\", \"\"),\n            });\n        });\n    }\n    async captureSample(_options) {\n        return this.capture(_options);\n    }\n    async getSupportedFlashModes() {\n        throw new Error('getSupportedFlashModes not supported under the web platform');\n    }\n    async setFlashMode(_options) {\n        throw new Error('setFlashMode not supported under the web platform');\n    }\n    async flip() {\n        throw new Error('flip not supported under the web platform');\n    }\n    async setOpacity(_options) {\n        const video = document.getElementById(\"video\");\n        if (!!video && !!_options['opacity']) {\n            video.style.setProperty(\"opacity\", _options['opacity'].toString());\n        }\n    }\n}\nconst CameraPreview = new CameraPreviewWeb();\nexport { CameraPreview };\nimport { registerWebPlugin } from \"@capacitor/core\";\nregisterWebPlugin(CameraPreview);\n//# sourceMappingURL=web.js.map"]}}